import{a as ot}from"./chunk-4WYR6RPK.js";import{a as te}from"./chunk-PLIYC6U5.js";import{a as Je,c as Xe,f as qe,p as Ke}from"./chunk-OYOJ2XX2.js";import{a as $}from"./chunk-NHNZC5T7.js";import{a as $e,b as We,c as Ye,d as G,e as U,f as H,g as Qe,h as Ze}from"./chunk-KFQQY7Q4.js";import{a as nt}from"./chunk-YRUNILEP.js";import{a as ee}from"./chunk-RX5L7MNL.js";import{a as tt}from"./chunk-KMK3IRKM.js";import{a as it}from"./chunk-AY7NQNNI.js";import{a as S}from"./chunk-GDEHS6TE.js";import{a as Q}from"./chunk-SX46PIGY.js";import{a as et}from"./chunk-SNFTPR3R.js";import"./chunk-ZS4G4JJV.js";import{c as Ge,d as He}from"./chunk-4QFA7BNO.js";import{$a as u,Aa as h,Ba as we,Ca as Ee,Da as ke,Fa as Ie,Ga as Ae,Ib as ze,L as ve,M as T,N as xe,Oa as f,P as D,Pb as L,Qa as d,Qb as j,Ra as Te,Rb as P,Sa as le,Sb as Ve,Tb as Fe,U as N,Ua as n,Ub as Be,V as J,Va as o,Wa as c,Wb as b,Xa as X,Ya as q,Za as M,_ as C,_a as g,a as re,b as ae,ba as be,ca as Se,d as de,db as Ne,e as me,eb as s,fb as x,g as pe,gb as A,ha as k,hb as Me,ia as I,j as ue,ja as p,jb as Pe,k as he,ka as v,kb as Oe,lb as De,n as E,na as ye,nb as w,o as fe,ob as B,pb as K,qa as _e,r as ge,rb as Le,tb as je,ub as Ue,va as Ce,x as se,xb as Re,z as _,za as l}from"./chunk-CZ4BJCOO.js";window.global=window;var Ct=t=>["/offers",t];function wt(t,a){t&1&&(n(0,"div"),s(1,"Chargement des offres..."),o())}function Et(t,a){t&1&&(n(0,"div",92),s(1,"Aucune offre disponible."),o())}function kt(t,a){if(t&1&&(n(0,"div",95)(1,"div",96)(2,"span",97),s(3),o(),n(4,"button",98),p(),n(5,"svg",99),c(6,"path",100),o()()(),v(),n(7,"h3",101),s(8),o(),n(9,"p",61),s(10),o(),n(11,"div",102)(12,"div",103),p(),n(13,"svg",104),c(14,"path",105)(15,"path",106),o(),s(16),o(),v(),n(17,"div",103),p(),n(18,"svg",104),c(19,"path",107),o(),s(20),o()(),v(),n(21,"a",108)(22,"button",109),s(23," Voir les d\xE9tails "),p(),n(24,"svg",110),c(25,"path",111),o()()()()),t&2){let e=a.$implicit;l(3),x(e.domain),l(5),x(e.title),l(2),A("Entreprise: ",e.companyName,""),l(6),A(" ",e.location," "),l(4),A(" Dur\xE9e: ",e.duration," "),l(),d("routerLink",B(6,Ct,e.id))}}function It(t,a){if(t&1&&(n(0,"div",93),f(1,kt,26,8,"div",94),o()),t&2){let e=u();l(),d("ngForOf",e.offers)}}var rt=(()=>{class t{get isLoggedIn(){try{return this.authService.isLoggedIn()}catch(e){return console.error("Erreur dans isLoggedIn:",e),!1}}constructor(e,i,r){this.authService=e,this.offerService=i,this.router=r,this.offers=[],this.filteredOffers=[],this.page=0,this.size=6,this.loading=!1,this.userRole=null,this.searchText="",this.loadOffers(),console.log("HomePageComponent initialis\xE9"),this.authService.isLoggedIn()&&(this.userRole=this.authService.getCurrentUserRole(),console.log("R\xF4le utilisateur:",this.userRole))}redirectToOffers(){this.authService.isLoggedIn()?this.userRole?this.router.navigate([`/${this.userRole.toLowerCase()}/offers`],{queryParams:{role:this.userRole}}):(console.error("Le r\xF4le de l'utilisateur est introuvable."),alert("Erreur: r\xF4le utilisateur introuvable.")):(alert("Veuillez vous connecter pour acc\xE9der aux offres de stage."),this.router.navigate(["/auth/login"]))}ngOnInit(){this.loadOffers()}loadOffers(){this.loading=!0,this.offerService.getOffers(this.page,this.size).subscribe({next:e=>{console.log("Offres charg\xE9es avec succ\xE8s:",e),this.offers=e.content,this.filteredOffers=this.offers,this.loading=!1},error:e=>{console.error("Erreur lors du chargement des offres:",e),this.loading=!1}})}onSearchChange(){this.searchText?this.filteredOffers=this.offers.filter(e=>e.title.toLowerCase().includes(this.searchText.toLowerCase())||e.domain.toLowerCase().includes(this.searchText.toLowerCase())||e.companyName.toLowerCase().includes(this.searchText.toLowerCase())):this.filteredOffers=this.offers}loadNextPage(){this.page++,this.loadOffers()}loadPreviousPage(){this.page>0&&(this.page--,this.loadOffers())}static{this.\u0275fac=function(i){return new(i||t)(h(S),h(ee),h(U))}}static{this.\u0275cmp=C({type:t,selectors:[["app-home-page"]],standalone:!0,features:[w],decls:196,vars:5,consts:[[1,"relative","h-screen","flex","items-center","justify-center","overflow-hidden"],[1,"border","border-b","h-screen","absolute","inset-0","bg-cover","bg-center",2,"background-image","url('/assets/slider.jpg')"],[1,"w-full","h-screen"],[1,"w-full","relative","bg-amber-200","inset-0","bg-cover","bg-center",2,"background-image","url('/slider.jpg')"],[1,"absolute","inset-0","overflow-hidden","bg-gradient-to-r","from-[#2dd4bf]","to-[#1f2937]","opacity-50"],[1,"absolute","inset-0","overflow-hidden","bg-gradient-to-r","from-primary-800","via-primary-700","to-primary-900","opacity-90"],[1,"absolute","bottom-0","right-0","w-96","h-96","bg-gradient-to-r","bg-[#2dd4bf]","to-[#1f2937]","rounded-full","blur-3xl","animate-pulse"],[1,"absolute","bottom-0","right-0","w-64","h-64","!bg-orange-400","!rounded-full","!blur-3xl","!animate-pulse"],[1,"absolute","top-1/2","left-1/3","w-48","h-48","bg-primary-400","rounded-full","blur-3xl","animate-pulse"],["x-data","{ show: false }","x-init","setTimeout(() => show = true, 100)",1,"absolute","inset-0","bg-gradient-to-br","from-primary-900","via-primary-700","to-teal-600","opacity-100","transition-opacity","duration-1000","hover:opacity-50"],[1,"relative","z-10","text-center","text-white","max-w-4xl","mx-auto","px-4"],[1,"text-5xl","md:text-6xl","font-bold","mb-6"],[1,"text-orange-500"],[1,"text-xl","mb-8"],[1,"bg-orange-500","hover:bg-orange-600","text-lg","px-8","py-3","rounded-lg",3,"click"],["id","offers",1,"py-16","bg-gray-50"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"text-center","mb-12"],[1,"text-4xl","font-bold","text-primary-900","mb-4"],[1,"text-xl","text-gray-600"],[1,"max-w-4xl","mx-auto","mb-12"],[1,"flex","gap-4"],[1,"flex-1","h-12","relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-4","top-1/2","transform","-translate-y-1/2","text-gray-400","w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Rechercher par titre, domaine ou entreprise...",1,"pl-12","py-4","w-full","h-12","text-lg","border-2","border-gray-200","rounded-full",3,"ngModelChange","input","ngModel"],[1,"bg-primary-900","hover:bg-primary-800","px-8","py-2","rounded-full","text-white","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],[4,"ngIf"],["class","items-center justify-center",4,"ngIf"],["class","grid grid-cols-1 border-b md:grid-cols-2 lg:grid-cols-3 gap-8",4,"ngIf"],[1,"flex","justify-between","mt-4"],[3,"click","disabled"],[3,"click"],["id","about",1,"py-16","bg-white"],[1,"relative","py-20","bg-gradient-to-r","from-primary-900","to-teal-600"],[1,"relative","z-10","max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","text-center"],[1,"text-4xl","font-bold","text-white","mb-4"],[1,"text-xl","text-white","mb-16","max-w-3xl","mx-auto"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-8"],[1,"bg-white/10","backdrop-blur-sm","rounded-lg","p-8","text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M22 10v6M2 10l10-5 10 5-10 5z"],["d","M6 12v5c3 3 9 3 12 0v-5"],[1,"text-2xl","font-bold","mb-4"],[1,"text-white/90"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"],["d","M6 12h4h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 14l9-5-9-5-9 5 9 5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"],[1,"py-16","bg-gray-50"],[1,"relative","py-20","bg-gray-100"],[1,"absolute","inset-0","bg-white/95"],[1,"relative","z-10","max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"text-4xl","font-bold","text-center","text-primary-900","mb-16"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8","mb-12"],[1,"flex","items-start","space-x-4"],[1,"flex-shrink-0","w-12","h-12","bg-primary-900","text-white","rounded-full","flex","items-center","justify-center","font-bold","text-lg"],[1,"bg-white","rounded-lg","p-6","shadow-md","flex-1"],[1,"text-xl","font-bold","text-primary-900","mb-2"],[1,"text-gray-600"],[1,"max-w-2xl","mx-auto"],[1,"bg-gradient-to-r","from-orange-500","to-orange-600","text-white","rounded-lg","border-0"],[1,"p-8","text-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"text-lg"],[1,"py-16","bg-white"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-12","items-center"],[1,"text-4xl","font-bold","text-primary-900","mb-8"],[1,"space-y-6"],[1,"border-l-4","border-l-orange-500","shadow-md","p-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-500","flex-shrink-0","mt-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],[1,"relative"],[1,"bg-gradient-to-br","from-orange-500","to-orange-600","rounded-2xl","p-8","text-white","transform","rotate-3","shadow-2xl"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mb-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],[1,"text-lg","mb-6"],[1,"flex","items-center","space-x-4"],[1,"flex","-space-x-2"],[1,"w-8","h-8","bg-white","rounded-full"],[1,"w-8","h-8","bg-primary-200","rounded-full"],[1,"w-8","h-8","bg-orange-200","rounded-full"],[1,"flex","items-center"],["viewBox","0 0 20 20",1,"w-5","h-5","text-yellow-300","fill-current"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"ml-2","text-sm"],[1,"items-center","justify-center"],[1,"grid","grid-cols-1","border-b","md:grid-cols-2","lg:grid-cols-3","gap-8"],["class","bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 border-0",4,"ngFor","ngForOf"],[1,"bg-white","p-6","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow","duration-300","border-0"],[1,"flex","justify-between","items-start","mb-2"],[1,"bg-orange-100","text-orange-800","text-xs","font-semibold","px-2.5","py-0.5","rounded-full"],[1,"text-gray-400","hover:text-red-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"],[1,"text-xl","mb-1","font-bold","text-primary-900"],[1,"space-y-3","my-4"],[1,"flex","items-center","text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[3,"routerLink"],[1,"w-full","bg-primary-900","hover:bg-primary-800","text-white","py-2","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"]],template:function(i,r){i&1&&(n(0,"section",0)(1,"div",1),s(2," text"),n(3,"div",2),s(4,"text "),n(5,"div",3),c(6,"div",4),n(7,"div",5),c(8,"div",6)(9,"div",7)(10,"div",8),o()()()(),c(11,"div",9),n(12,"div",10)(13,"h1",11),s(14," CHERCHEZ "),c(15,"br"),s(16," TROUVEZ "),n(17,"span",12),s(18,"&"),o(),c(19,"br"),n(20,"span",12),s(21,"POSTULEZ"),o()(),n(22,"p",13),s(23,"Des centaines d'offres de stage vous attendent."),o(),n(24,"a")(25,"button",14),g("click",function(){return r.redirectToOffers()}),s(26," Voir les offres "),o()()()(),n(27,"section",15)(28,"div",16)(29,"div",17)(30,"h2",18),s(31," Trouvez votre stage id\xE9al "),o(),n(32,"p",19),s(33," Parcourez nos offres de stage et trouvez l'opportunit\xE9 qui correspond \xE0 vos aspirations professionnelles. "),o()(),n(34,"div",20)(35,"div",21)(36,"div",22),p(),n(37,"svg",23),c(38,"path",24),o(),v(),n(39,"input",25),De("ngModelChange",function(y){return Oe(r.searchText,y)||(r.searchText=y),y}),g("input",function(){return r.onSearchChange()}),o()(),n(40,"button",26),p(),n(41,"svg",27),c(42,"path",28),o(),s(43," Filtres "),o()()(),f(44,wt,2,0,"div",29)(45,Et,2,0,"div",30)(46,It,2,1,"div",31),v(),n(47,"div",32)(48,"button",33),g("click",function(){return r.loadPreviousPage()}),s(49,"Pr\xE9c\xE9dent"),o(),n(50,"button",34),g("click",function(){return r.loadNextPage()}),s(51,"Suivant"),o()()()(),n(52,"section",35)(53,"div",36)(54,"div",37)(55,"h2",38),s(56,"Qui sommes nous ?"),o(),n(57,"p",39),s(58," StageRichy48 est la plateforme qui relie \xE9tudiants, entreprises et \xE9tablissements pour des stages r\xE9ussis. "),c(59,"br"),s(60," Ensemble, faisons grandir les talents de demain. "),o(),n(61,"div",40)(62,"div",41),p(),n(63,"svg",42),c(64,"path",43)(65,"path",44),o(),v(),n(66,"h3",45),s(67,"\xC9tudiants"),o(),n(68,"p",46),s(69," Consultez les offres disponibles, postulez en quelques clics et suivez facilement vos candidatures. "),o()(),n(70,"div",41),p(),n(71,"svg",42),c(72,"path",47)(73,"path",48),o(),v(),n(74,"h3",45),s(75,"Entreprise"),o(),n(76,"p",46),s(77," Publiez vos offres de stage, g\xE9rez les candidatures et suivez l'avancement des stagiaires. "),o()(),n(78,"div",41),p(),n(79,"svg",42),c(80,"path",49)(81,"path",50),o(),v(),n(82,"h3",45),s(83,"\xC9tablissements"),o(),n(84,"p",46),s(85," Validez les conventions, suivez les stages en cours et communiquez avec tous les acteurs. "),o()()()()()(),n(86,"section",51)(87,"div",52),c(88,"div",53),n(89,"div",54)(90,"h2",55),s(91,"Comment \xE7a marche ?"),o(),n(92,"div",56)(93,"div",57)(94,"div",58),s(95," 1 "),o(),n(96,"div",59)(97,"h3",60),s(98,"Inscription & Profil"),o(),n(99,"p",61),s(100," Les \xE9tudiants et entreprises cr\xE9ent leur compte et compl\xE8tent leur profil. "),o()()(),n(101,"div",57)(102,"div",58),s(103," 2 "),o(),n(104,"div",59)(105,"h3",60),s(106,"Candidature aux Stages"),o(),n(107,"p",61),s(108,"Les \xE9tudiants postulent aux offres apr\xE8s avoir compl\xE9t\xE9 leur profil."),o()()(),n(109,"div",57)(110,"div",58),s(111," 3 "),o(),n(112,"div",59)(113,"h3",60),s(114,"Validation & Suivi du Stage"),o(),n(115,"p",61),s(116," Les offres sont valid\xE9es et un suivi est assur\xE9 tout au long du stage. "),o()()(),n(117,"div",57)(118,"div",58),s(119," 4 "),o(),n(120,"div",59)(121,"h3",60),s(122,"Rapport & Certification"),o(),n(123,"p",61),s(124,"Un rapport est g\xE9n\xE9r\xE9 \xE0 la fin, avec possibilit\xE9 de certification."),o()()()(),n(125,"div",62)(126,"div",63)(127,"div",64),p(),n(128,"svg",65),c(129,"path",66),o(),v(),n(130,"h3",45),s(131,"Processus acc\xE9l\xE9r\xE9"),o(),n(132,"p",67),s(133," Des d\xE9marches simplifi\xE9es pour gagner du temps et rester concentr\xE9 sur l'essentiel. "),o()()()()()()(),n(134,"section",68)(135,"div",16)(136,"div",69)(137,"div")(138,"h2",70),s(139,"POURQUOI NOUS CHOISIR ?"),o(),n(140,"div",71)(141,"div",72)(142,"div",57),p(),n(143,"svg",73),c(144,"path",74),o(),v(),n(145,"div")(146,"h3",60),s(147,"Suivie des stages"),o(),n(148,"p",61),s(149," Un suivi r\xE9gulier de chaque \xE9tape du stage pour assurer votre r\xE9ussite. "),o()()()(),n(150,"div",72)(151,"div",57),p(),n(152,"svg",73),c(153,"path",75),o(),v(),n(154,"div")(155,"h3",60),s(156,"Communication centralis\xE9e"),o(),n(157,"p",61),s(158," La communication entre les utilisateurs via un syst\xE8me de notifications et d'\xE9change de documents, assurant une circulation d'information fluide et structur\xE9e. "),o()()()(),n(159,"div",72)(160,"div",57),p(),n(161,"svg",73),c(162,"path",66),o(),v(),n(163,"div")(164,"h3",60),s(165,"Processus acc\xE9l\xE9r\xE9"),o(),n(166,"p",61),s(167," Des d\xE9marches simplifi\xE9es pour gagner du temps et rester concentr\xE9 sur l'essentiel. "),o()()()()()(),n(168,"div",76)(169,"div",77),p(),n(170,"svg",78),c(171,"path",79)(172,"circle",80)(173,"path",81),o(),v(),n(174,"h3",45),s(175,"Rejoignez notre communaut\xE9"),o(),n(176,"p",82),s(177,"Plus de 10,000 \xE9tudiants et 500 entreprises nous font confiance."),o(),n(178,"div",83)(179,"div",84),c(180,"div",85)(181,"div",86)(182,"div",87),o(),n(183,"div",88),p(),n(184,"svg",89),c(185,"path",90),o(),n(186,"svg",89),c(187,"path",90),o(),n(188,"svg",89),c(189,"path",90),o(),n(190,"svg",89),c(191,"path",90),o(),n(192,"svg",89),c(193,"path",90),o(),v(),n(194,"span",91),s(195,"4.9/5"),o()()()()()()()()),i&2&&(l(39),Pe("ngModel",r.searchText),l(5),d("ngIf",r.loading),l(),d("ngIf",!r.loading&&r.offers.length===0),l(),d("ngIf",!r.loading&&r.offers.length>0),l(2),d("disabled",r.page===0))},dependencies:[b,j,P,H,Ke,Je,Xe,qe],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-family:Merriweather,serif}p[_ngcontent-%COMP%], a[_ngcontent-%COMP%], li[_ngcontent-%COMP%], span[_ngcontent-%COMP%], div[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}"]})}}return t})();var ne=(()=>{class t{constructor(){this.socket=null,this.connected=!1,this.notificationsSubject=new he(null),this.notifications$=this.notificationsSubject.asObservable()}connect(e){if(!(this.connected||this.socket))try{let i=`ws://localhost:8080/ws?userId=${e}`;this.socket=new WebSocket(i),this.socket.onopen=()=>{console.log("WebSocket connected"),this.connected=!0},this.socket.onmessage=r=>{try{let m=JSON.parse(r.data);this.notificationsSubject.next(m)}catch(m){console.error("Error parsing WebSocket message:",m)}},this.socket.onclose=()=>{console.log("WebSocket disconnected"),this.connected=!1,this.socket=null},this.socket.onerror=r=>{console.error("WebSocket error:",r),this.connected=!1}}catch(i){console.error("Failed to connect WebSocket:",i)}}disconnect(){this.socket&&(this.socket.close(),this.socket=null,this.connected=!1)}isConnected(){return this.connected}sendMessage(e){this.socket&&this.connected&&this.socket.send(JSON.stringify(e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function At(t,a){t&1&&(n(0,"div",12)(1,"a",13)(2,"button",14),s(3," S'inscrire "),o()(),n(4,"a",15)(5,"button",16),s(6," Se connecter "),o()()())}function Tt(t,a){if(t&1&&(n(0,"span",24),s(1),o()),t&2){let e=u(2);l(),x(e.unreadCount)}}function Nt(t,a){if(t&1){let e=M();n(0,"button",33),g("click",function(){k(e);let r=u(3);return I(r.markAllAsRead())}),s(1,"Tout marquer comme lu"),o()}}function Mt(t,a){t&1&&(n(0,"div",34),s(1," Aucune notification "),o())}function Pt(t,a){t&1&&c(0,"div",41)}function Ot(t,a){if(t&1){let e=M();n(0,"div",35),g("click",function(){let r=k(e).$implicit,m=u(3);return I(m.markAsRead(r))}),n(1,"div",36)(2,"div",37)(3,"p",38),s(4),o(),n(5,"p",39),s(6),o()(),f(7,Pt,1,0,"div",40),o()()}if(t&2){let e=a.$implicit,i=u(3);le("bg-blue-50",!e.read),l(3),le("font-semibold",!e.read),l(),x(e.message),l(2),x(i.formatDate(e.createdAt)),l(),d("ngIf",!e.read)}}function Dt(t,a){if(t&1&&(n(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"h3",29),s(5,"Notifications"),o(),f(6,Nt,2,0,"button",30),o()(),f(7,Mt,2,0,"div",31)(8,Ot,8,7,"div",32),o()()),t&2){let e=u(2);l(6),d("ngIf",e.unreadCount>0),l(),d("ngIf",e.notifications.length===0),l(),d("ngForOf",e.notifications)}}function Lt(t,a){if(t&1){let e=M();n(0,"div",12)(1,"div",17)(2,"button",18),g("click",function(){k(e);let r=u();return I(r.toggleNotifications())}),p(),n(3,"svg",19),c(4,"path",20),o(),f(5,Tt,2,1,"span",21),o(),f(6,Dt,9,3,"div",22),o(),v(),n(7,"button",23),g("click",function(){k(e);let r=u();return I(r.logout())}),s(8," D\xE9connexion "),o()()}if(t&2){let e=u();l(5),d("ngIf",e.unreadCount>0),l(),d("ngIf",e.showNotifications)}}var lt=(()=>{class t{get isLoggedIn(){try{return this.authService.isLoggedIn()}catch(e){return console.error("Error checking login status:",e),!1}}logout(){this.authService.logout(),this.router.navigate([""])}constructor(e,i,r,m,y){this.authService=e,this.router=i,this.route=r,this.notificationService=m,this.webSocketService=y,this.loading=!1,this.userRole=null,this.notifications=[],this.unreadCount=0,this.showNotifications=!1,this.subscriptions=[],this.authService.isLoggedIn()&&(this.userRole=this.authService.getCurrentUserRole(),console.log("Role utilisateur:",this.userRole))}ngOnInit(){this.isLoggedIn&&(this.loadNotifications(),this.loadUnreadCount(),this.initializeWebSocket())}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.webSocketService.disconnect()}initializeWebSocket(){let e=this.authService.getCurrentUser();if(e?.id){this.webSocketService.connect(e.id.toString());let i=this.webSocketService.notifications$.subscribe(r=>{r&&(this.notifications.unshift(r),this.unreadCount++)});this.subscriptions.push(i)}}loadNotifications(){let e=this.notificationService.getServerNotifications().subscribe({next:r=>{this.notifications=r.content||r||[]},error:r=>console.error("Error loading server notifications:",r)}),i=this.notificationService.getNotifications().subscribe({next:r=>{console.log("Local notifications updated:",r)},error:r=>console.error("Error loading local notifications:",r)});this.subscriptions.push(e,i)}loadUnreadCount(){let e=this.notificationService.getServerUnreadCount().subscribe({next:i=>{this.unreadCount=i.count||0},error:i=>console.error("Error loading unread count:",i)});this.subscriptions.push(e)}toggleNotifications(){this.showNotifications=!this.showNotifications}markAsRead(e){if(e.read)e.link&&this.router.navigate([e.link]);else{let i=this.notificationService.markServerNotificationAsRead(e.id).subscribe({next:()=>{e.read=!0,this.unreadCount=Math.max(0,this.unreadCount-1),e.link&&this.router.navigate([e.link])},error:r=>console.error("Error marking notification as read:",r)});this.subscriptions.push(i)}this.showNotifications=!1}markAllAsRead(){let e=this.notificationService.markAllServerNotificationsAsRead().subscribe({next:()=>{this.notifications.forEach(i=>i.read=!0),this.unreadCount=0},error:i=>console.error("Error marking all notifications as read:",i)});this.subscriptions.push(e)}formatDate(e){let i=new Date(e),m=Math.floor((new Date().getTime()-i.getTime())/(1e3*60));return m<1?"\xC0 l'instant":m<60?`Il y a ${m} min`:m<1440?`Il y a ${Math.floor(m/60)} h`:`Il y a ${Math.floor(m/1440)} j`}static{this.\u0275fac=function(i){return new(i||t)(h(S),h(U),h(Ye),h($),h(ne))}}static{this.\u0275cmp=C({type:t,selectors:[["app-navbar"]],standalone:!0,features:[w],decls:18,vars:2,consts:[[1,"bg-white","shadow-sm"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","py-4"],[1,"flex","items-center"],[1,"text-2xl","font-bold"],[1,"text-orange-500"],[1,"text-primary-900"],[1,"hidden","md:flex","space-x-8"],["routerLink","/",1,"text-gray-700","hover:text-orange-500"],["routerLink","/offers",1,"text-gray-700","hover:text-orange-500"],["href","#about",1,"text-gray-700","hover:text-orange-500"],["class","flex items-center space-x-4",4,"ngIf"],[1,"flex","items-center","space-x-4"],["routerLink","/auth/register"],[1,"border-2","border-primary-900","text-primary-900","hover:bg-primary-100","px-4","py-2","rounded-md"],["routerLink","/auth/login"],[1,"bg-primary-900","text-white","hover:bg-primary-800","px-4","py-2","rounded-md"],[1,"relative"],[1,"relative","p-2","text-gray-600","hover:text-gray-900","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","rounded-full",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",4,"ngIf"],["class","absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50",4,"ngIf"],[1,"bg-orange-500","text-white","hover:bg-orange-600","px-4","py-2","rounded-md",3,"click"],[1,"absolute","-top-1","-right-1","bg-red-500","text-white","text-xs","rounded-full","h-5","w-5","flex","items-center","justify-center"],[1,"absolute","right-0","mt-2","w-80","bg-white","rounded-md","shadow-lg","ring-1","ring-black","ring-opacity-5","z-50"],[1,"py-1","max-h-96","overflow-y-auto"],[1,"px-4","py-2","border-b","border-gray-200"],[1,"flex","justify-between","items-center"],[1,"text-sm","font-medium","text-gray-900"],["class","text-xs text-primary-600 hover:text-primary-800",3,"click",4,"ngIf"],["class","px-4 py-3 text-sm text-gray-500 text-center",4,"ngIf"],["class","px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"text-xs","text-primary-600","hover:text-primary-800",3,"click"],[1,"px-4","py-3","text-sm","text-gray-500","text-center"],[1,"px-4","py-3","hover:bg-gray-50","cursor-pointer","border-b","border-gray-100",3,"click"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"text-sm","text-gray-900"],[1,"text-xs","text-gray-500","mt-1"],["class","w-2 h-2 bg-blue-500 rounded-full ml-2 mt-1",4,"ngIf"],[1,"w-2","h-2","bg-blue-500","rounded-full","ml-2","mt-1"]],template:function(i,r){i&1&&(n(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),s(6,"Stage"),o(),n(7,"span",6),s(8,"Richy48"),o()()(),n(9,"nav",7)(10,"a",8),s(11," Accueil "),o(),n(12,"a",9),s(13," Offres "),o(),n(14,"a",10),s(15," \xC0 propos "),o()(),f(16,At,7,0,"div",11)(17,Lt,9,2,"div",11),o()()()),i&2&&(l(16),d("ngIf",!r.isLoggedIn),l(),d("ngIf",r.isLoggedIn))},dependencies:[b,j,P,H]})}}return t})();var ct=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-main-layout"]],standalone:!0,features:[w],decls:4,vars:0,consts:[[1,"min-h-screen","bg-white"]],template:function(i,r){i&1&&(n(0,"div",0),c(1,"app-navbar"),n(2,"main"),c(3,"router-outlet"),o()())},dependencies:[G,lt,b]})}}return t})();var jt=(t,a)=>({"translate-x-0":t,"-translate-x-full":a,"md:translate-x-0":!0});function Ut(t,a){t&1&&(p(),n(0,"svg",25),c(1,"rect",26)(2,"rect",27)(3,"rect",28)(4,"rect",29),o())}function Rt(t,a){t&1&&(p(),n(0,"svg",25),c(1,"path",30)(2,"polyline",31),o())}function zt(t,a){t&1&&(p(),n(0,"svg",25),c(1,"path",30)(2,"polyline",31)(3,"polyline",32),o())}function Vt(t,a){t&1&&(p(),n(0,"svg",25),c(1,"rect",33)(2,"path",34),o())}function Ft(t,a){t&1&&(p(),n(0,"svg",25),c(1,"path",35)(2,"circle",36),o())}function Bt(t,a){t&1&&(p(),n(0,"svg",25),c(1,"path",37)(2,"circle",38)(3,"path",39),o())}function Gt(t,a){t&1&&(p(),n(0,"svg",25),c(1,"path",40)(2,"path",41),o())}function Ht(t,a){t&1&&(p(),n(0,"svg",25),c(1,"path",42)(2,"path",43),o())}function $t(t,a){t&1&&(p(),n(0,"svg",25),c(1,"path",40)(2,"path",41),o())}function Wt(t,a){t&1&&(p(),n(0,"svg",25),c(1,"line",44)(2,"line",45)(3,"line",46),o())}function Yt(t,a){t&1&&(p(),n(0,"svg",25),c(1,"circle",47)(2,"path",48),o())}function Qt(t,a){if(t&1&&(n(0,"li")(1,"a",22),X(2,23),f(3,Ut,5,0,"svg",24)(4,Rt,3,0,"svg",24)(5,zt,4,0,"svg",24)(6,Vt,3,0,"svg",24)(7,Ft,3,0,"svg",24)(8,Bt,4,0,"svg",24)(9,Gt,3,0,"svg",24)(10,Ht,3,0,"svg",24)(11,$t,3,0,"svg",24)(12,Wt,4,0,"svg",24)(13,Yt,3,0,"svg",24),q(),s(14),o()()),t&2){let e=a.$implicit;l(),d("routerLink",e.route),l(),d("ngSwitch",e.icon),l(),d("ngSwitchCase","layout-dashboard"),l(),d("ngSwitchCase","file-text"),l(),d("ngSwitchCase","file-check"),l(),d("ngSwitchCase","briefcase"),l(),d("ngSwitchCase","user"),l(),d("ngSwitchCase","users"),l(),d("ngSwitchCase","building"),l(),d("ngSwitchCase","graduation-cap"),l(),d("ngSwitchCase","building-2"),l(),d("ngSwitchCase","bar-chart"),l(),d("ngSwitchCase","settings"),l(),A(" ",e.label," ")}}function Zt(t,a){if(t&1){let e=M();n(0,"div",49),g("click",function(){k(e);let r=u();return I(r.toggleSidebar())}),o()}}var dt=(()=>{class t{constructor(e,i,r){if(this.authService=e,this.router=i,this.menuItems=[],this.userName="",this.userRole="",this.isOpen=!0,this.sidebarToggled=new _e,console.log("\u{1F4F1} DashboardLayoutComponent initialized"),!this.authService.isLoggedIn()){console.log("\u274C User not logged in, redirecting to login"),this.router.navigate(["/auth/login"]);return}let m=r.loadUserData()}get userInitials(){return this.userName.split(" ").map(e=>e[0]).join("").toUpperCase()}ngOnInit(){console.log("Menu Items in Sidebar:",this.menuItems)}toggleSidebar(){this.isOpen=!this.isOpen,this.sidebarToggled.emit(this.isOpen)}logout(){this.authService.logout(),this.router.navigate(["/auth/login"])}trackByFn(e,i){return i.route}static{this.\u0275fac=function(i){return new(i||t)(h(S),h(U),h(R))}}static{this.\u0275cmp=C({type:t,selectors:[["app-sidebar"]],inputs:{menuItems:"menuItems",userName:"userName",userRole:"userRole",isOpen:"isOpen"},outputs:{sidebarToggled:"sidebarToggled"},standalone:!0,features:[w],decls:27,vars:10,consts:[[1,"w-64","bg-primary-900","text-white","min-h-screen","fixed","left-0","top-0","z-40","transition-transform","duration-300","ease-in-out",3,"ngClass"],[1,"p-6","border-b","border-primary-800"],[1,"text-xl","font-bold"],[1,"text-orange-400"],[1,"mt-10"],[1,"space-y-2","px-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"absolute","bottom-0","left-0","right-0","p-4","border-t","border-primary-800"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-8","h-8","bg-orange-400","rounded-full","flex","items-center","justify-center"],[1,"text-sm","font-bold","text-primary-900"],[1,"ml-3"],[1,"text-sm","font-medium"],[1,"text-xs","text-primary-300"],[1,"flex","space-x-2"],["title","D\xE9connexion",1,"p-2","bg-red-600","hover:bg-red-700","text-white","rounded",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16,17 21,12 16,7"],["x1","21","y1","12","x2","9","y2","12"],["class","fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",3,"click",4,"ngIf"],["routerLinkActive","bg-orange-500 border-r-4 border-orange-300",1,"flex","items-center","px-4","py-3","text-white","hover:bg-primary-700","hover:text-orange-200","rounded-lg","transition-colors","duration-200","font-medium",3,"routerLink"],[3,"ngSwitch"],["class","w-6 h-6 mr-3","fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2",4,"ngSwitchCase"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2",1,"w-6","h-6","mr-3"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","14","y","14","width","7","height","7"],["x","3","y","14","width","7","height","7"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14,2 14,8 20,8"],["points","9,15 11,17 15,13"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],["d","M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"],["d","M6 12h4h4"],["d","M22 10v6M2 10l10-5 10 5-10 5z"],["d","M6 12v5c3 3 9 3 12 0v-5"],["x1","12","y1","20","x2","12","y2","10"],["x1","18","y1","20","x2","18","y2","4"],["x1","6","y1","20","x2","6","y2","16"],["cx","12","cy","12","r","3"],["d","M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33"],[1,"fixed","inset-0","bg-black","bg-opacity-50","z-30","md:hidden",3,"click"]],template:function(i,r){i&1&&(n(0,"aside",0)(1,"div",1)(2,"h2",2)(3,"span",3),s(4,"Stage"),o(),s(5,"Richy48 "),o()(),n(6,"nav",4)(7,"ul",5),f(8,Qt,15,14,"li",6),o()(),n(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"span",11),s(14),o()(),n(15,"div",12)(16,"p",13),s(17),o(),n(18,"p",14),s(19),o()()(),n(20,"div",15)(21,"button",16),g("click",function(){return r.logout()}),p(),n(22,"svg",17),c(23,"path",18)(24,"polyline",19)(25,"line",20),o()()()()()(),f(26,Zt,1,0,"div",21)),i&2&&(d("ngClass",K(7,jt,r.isOpen,!r.isOpen)),l(8),d("ngForOf",r.menuItems)("ngForTrackBy",r.trackByFn),l(6),x(r.userInitials),l(3),x(r.userName),l(2),x(r.userRole),l(7),d("ngIf",r.isOpen))},dependencies:[b,L,j,P,Ve,Fe,H,Qe]})}}return t})();var z=function(t){return t.APPLICATION_UPDATE="APPLICATION_UPDATE",t.MESSAGE_RECEIVED="MESSAGE_RECEIVED",t.AGREEMENT_UPDATE="AGREEMENT_UPDATE",t.SYSTEM="SYSTEM",t}(z||{});var Xt=t=>({"bg-primary-50":t});function qt(t,a){if(t&1&&(n(0,"span",7),s(1),o()),t&2){let e=u();l(),A(" ",e.unreadCount>9?"9+":e.unreadCount," ")}}function Kt(t,a){if(t&1){let e=M();n(0,"button",13),g("click",function(){k(e);let r=u(2);return I(r.markAllAsRead())}),s(1," Mark all as read "),o()}}function ei(t,a){if(t&1){let e=M();n(0,"div",15)(1,"div",16),g("click",function(){let r=k(e).$implicit,m=u(3);return I(m.handleNotificationClick(r))}),n(2,"div",17)(3,"p",18),s(4),o(),n(5,"button",19),g("click",function(){let r=k(e).$implicit,m=u(3);return I(m.handleNotificationClick(r))}),s(6,"\xD7"),o()(),n(7,"p",20),s(8),o()()()}if(t&2){let e=a.$implicit,i=u(3);d("ngClass",B(3,Xt,e.type===i.NotificationType.SYSTEM)),l(4),x(i.getNotificationTypeText(e.type)),l(4),x(e.message)}}function ti(t,a){if(t&1&&(X(0),f(1,ei,9,5,"div",14),q()),t&2){let e=u(2);l(),d("ngForOf",e.notifications)}}function ii(t,a){t&1&&(n(0,"div",21)(1,"p"),s(2,"No notifications yet"),o()())}function ni(t,a){if(t&1&&(n(0,"div",8)(1,"div",9)(2,"h3",10),s(3,"Notifications"),o(),f(4,Kt,2,0,"button",11),o(),f(5,ti,2,1,"ng-container",12)(6,ii,3,0,"ng-template",null,0,Ue),o()),t&2){let e=Ne(7),i=u();l(4),d("ngIf",i.notifications.length>0),l(),d("ngIf",i.notifications.length>0)("ngIfElse",e)}}var mt=(()=>{class t{constructor(e){this.notificationService=e,this.unreadCount=0,this.notifications=[],this.showNotifications=!1,this.NotificationType=z,this.destroy$=new ue,this.currentPage=0,this.pageSize=15}ngOnInit(){this.loadNotifications()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showNotifications&&this.notifications.length===0&&this.loadNotifications()}loadNotifications(){try{this.notificationService.getServerNotifications().pipe(ve(this.destroy$)).subscribe({next:e=>{this.notifications=e.content||e||[],this.updateUnreadCount()},error:e=>{console.error("Erreur lors du chargement des notifications:",e),this.notifications=[],this.unreadCount=0}})}catch(e){console.error("Erreur dans loadNotifications:",e),this.notifications=[],this.unreadCount=0}}markAllAsRead(){this.unreadCount=0,this.notificationService.markAllServerNotificationsAsRead().subscribe({next:()=>{this.notifications=[],this.unreadCount=0},error:e=>console.error("Error clearing notifications:",e)}),this.notifications=[]}handleNotificationClick(e){e?.id&&(this.notifications=this.notifications.filter(i=>i.id!==e.id),this.updateUnreadCount())}updateUnreadCount(){this.unreadCount=this.notifications.filter(e=>e.type===z.APPLICATION_UPDATE||e.type===z.AGREEMENT_UPDATE).length}getNotificationTypeText(e){switch(e){case z.APPLICATION_UPDATE:return"Application Update";case z.MESSAGE_RECEIVED:return"New Message";case z.AGREEMENT_UPDATE:return"Agreement Update";case z.SYSTEM:return"System Notification";default:return"Notification"}}static{this.\u0275fac=function(i){return new(i||t)(h($))}}static{this.\u0275cmp=C({type:t,selectors:[["app-notifications"]],inputs:{unreadCount:"unreadCount"},standalone:!0,features:[w],decls:6,vars:2,consts:[["noNotifications",""],[1,"relative"],[1,"relative","z-[500]","text-primary-300","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",4,"ngIf"],["class","absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg py-1 z-50 max-h-[80vh] overflow-y-auto",4,"ngIf"],[1,"absolute","-top-1","-right-1","bg-red-500","text-white","text-xs","rounded-full","h-5","w-5","flex","items-center","justify-center"],[1,"absolute","right-0","mt-2","w-80","bg-white","rounded-md","shadow-lg","py-1","z-50","max-h-[80vh]","overflow-y-auto"],[1,"flex","justify-between","items-center","px-4","py-2","border-b"],[1,"font-medium","text-gray-700"],["class","text-xs text-primary-600 hover:text-primary-800",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"text-xs","text-primary-600","hover:text-primary-800",3,"click"],["class","border-b last:border-b-0 border-primary-500",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-b","last:border-b-0","border-primary-500",3,"ngClass"],[1,"block","px-4","py-3","hover:bg-gray-50",3,"click"],[1,"flex","justify-between"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-red-500","hover:text-red-700",3,"click"],[1,"mt-1","text-sm","text-gray-700"],[1,"px-4","py-6","text-center","text-gray-500"]],template:function(i,r){i&1&&(n(0,"div",1)(1,"button",2),g("click",function(){return r.toggleNotifications()}),p(),n(2,"svg",3),c(3,"path",4),o(),f(4,qt,2,1,"span",5),o(),f(5,ni,8,3,"div",6),o()),i&2&&(l(4),d("ngIf",r.unreadCount>0),l(),d("ngIf",r.showNotifications))},dependencies:[b,L,j,P],styles:["[_nghost-%COMP%]{display:block}"]})}}return t})();var oi=t=>({"ml-0":t});var R=(()=>{class t{constructor(e,i){if(this.authService=e,this.router=i,this.sidebarOpen=!0,this.currentUser={firstName:"Utilisateur",lastName:"",role:"STUDENT",email:""},this.menuItems=[],console.log("\u{1F4F1} DashboardLayoutComponent initialized"),!this.authService.isLoggedIn()){console.log("\u274C User not logged in, redirecting to login"),this.router.navigate(["/auth/login"]);return}this.loadUserData()}loadUserData(){console.log("\u{1F464} Loading user data...");let e=this.authService.getCurrentUser();if(e)console.log("\u2705 User found in auth service:",e),this.currentUser={firstName:e.firstName||"Utilisateur",lastName:e.lastName||"",role:e.role||"STUDENT",email:e.email||"",id:e.id},this.updateMenuItems();else{console.log("\u26A0\uFE0F No user in auth service, trying to load from storage...");let i=this.authService.getCurrentUserRole(),r=this.authService.getCurrentUserId();i&&r?(console.log("\u2705 User data found in storage:",{role:i,id:r}),this.currentUser={firstName:"Utilisateur",lastName:"",role:i,email:"",id:r},this.updateMenuItems(),this.loadUserProfile()):(console.error("\u274C No user data found, redirecting to login"),this.router.navigate(["/auth/login"]))}}loadUserProfile(){console.log("\u{1F4C4} Loading user profile from API..."),this.authService.getUserProfile().subscribe({next:e=>{console.log("\u2705 User profile loaded:",e),this.currentUser={firstName:e.firstName||"Utilisateur",lastName:e.lastName||"",role:e.role,email:e.email||"",id:e.id},this.updateMenuItems()},error:e=>{console.error("\u274C Error loading user profile:",e)}})}updateMenuItems(){console.log("\u{1F4DD} Updating menu items for role:",this.currentUser.role),this.menuItems=this.getMenuItems(),console.log("\u{1F4DD} Menu items updated:",this.menuItems)}onSidebarToggle(e){this.sidebarOpen=e}getMenuItems(){switch(console.log("Current User Role:",this.currentUser.role),this.currentUser.role){case"STUDENT":return this.getStudentMenu();case"COMPANY":return this.getCompanyMenu();case"FACULTY":return this.getFacultyMenu();case"ADMIN":return this.getAdminMenu();default:return[]}}getStudentMenu(){return[{label:"Tableau de bord",route:"/student/dashboard",icon:"layout-dashboard"},{label:"Mes candidatures",route:"/student/applications",icon:"file-text"},{label:"Mes conventions",route:"/student/agreements",icon:"file-check"},{label:"Offres de stage",route:"/offers",icon:"briefcase"},{label:"Profil",route:"/profile",icon:"user"}]}getCompanyMenu(){return[{label:"Tableau de bord",route:"/company/dashboard",icon:"layout-dashboard"},{label:"Mes offres",route:"/company/offers",icon:"briefcase"},{label:"Candidatures",route:"/company/applications",icon:"users"},{label:"Conventions",route:"/company/agreements",icon:"file-check"},{label:"Rapports",route:"/company/reports",icon:"bar-chart"},{label:"Profil entreprise",route:"/profile",icon:"building"}]}getFacultyMenu(){return[{label:"Tableau de bord",route:"/faculty/dashboard",icon:"layout-dashboard"},{label:"\xC9tudiants",route:"/faculty/students",icon:"graduation-cap"},{label:"Entreprises",route:"/faculty/companies",icon:"building-2"},{label:"Conventions",route:"/faculty/agreements",icon:"file-check"},{label:"Rapports",route:"/faculty/reports",icon:"bar-chart"}]}getAdminMenu(){return[{label:"Tableau de bord",route:"/admin/dashboard",icon:"layout-dashboard"},{label:"Utilisateurs",route:"/admin/users",icon:"users"},{label:"Entreprises",route:"/admin/companies",icon:"building-2"},{label:"Conventions",route:"/admin/agreements",icon:"file-check"},{label:"Param\xE8tres",route:"/admin/settings",icon:"settings"},{label:"Rapports",route:"/admin/reports",icon:"bar-chart"}]}logout(){this.authService.logout(),this.router.navigate(["/auth/login"])}get userInitials(){let e=this.currentUser.firstName||"U",i=this.currentUser.lastName||"";return`${e.charAt(0)}${i.charAt(0)}`.toUpperCase()}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}static{this.\u0275fac=function(i){return new(i||t)(h(S),h(U))}}static{this.\u0275cmp=C({type:t,selectors:[["app-dashboard-layout"]],standalone:!0,features:[w],decls:26,vars:12,consts:[[1,"flex","min-h-screen","bg-gray-100"],[1,"fixed","top-0","right-0","bg-red-500","text-white","p-2","z-50"],[3,"sidebarToggled","menuItems","userName","userRole","isOpen"],[1,"flex-1","transition-all","duration-300","md:ml-64",3,"ngClass"],[1,"bg-white","shadow-sm","border-b"],[1,"flex","items-center","justify-between","px-6","py-4"],[1,"md:hidden","text-primary-600","hover:text-primary-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"flex","items-center","space-x-4","ml-auto"],[1,"relative"],[1,"flex","items-center","space-x-3","text-primary-700","hover:text-primary-900"],[1,"text-right"],[1,"text-sm","font-medium","text-primary-900"],[1,"text-xs","text-primary-600"],[1,"w-10","h-10","bg-primary-600","rounded-full","flex","items-center","justify-center"],[1,"text-sm","font-bold","text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["points","6,9 12,15 18,9"],[1,"p-6"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1),s(2),o(),n(3,"app-sidebar",2),g("sidebarToggled",function(y){return r.onSidebarToggle(y)}),o(),n(4,"div",3)(5,"header",4)(6,"div",5)(7,"button",6),g("click",function(){return r.toggleSidebar()}),p(),n(8,"svg",7),c(9,"path",8),o()(),v(),n(10,"div",9)(11,"div",10),c(12,"app-notifications"),o(),n(13,"button",11)(14,"div",12)(15,"p",13),s(16),o(),n(17,"p",14),s(18),o()(),n(19,"div",15)(20,"span",16),s(21),o()(),p(),n(22,"svg",17),c(23,"polyline",18),o()()()()(),v(),n(24,"main",19),c(25,"router-outlet"),o()()()),i&2&&(l(2),Me(" Role: ",r.currentUser.role," | Items: ",r.getMenuItems().length," "),l(),d("menuItems",r.menuItems)("userName",r.currentUser.firstName||"Utilisateur")("userRole",r.currentUser.role||"USER")("isOpen",r.sidebarOpen),l(),d("ngClass",B(10,oi,!r.sidebarOpen)),l(12),x(r.currentUser.firstName),l(2),x(r.currentUser.role),l(3),x(r.userInitials))},dependencies:[b,L,G,dt,mt]})}}return t})();var F=(()=>{class t{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.checkAuth(e)}canActivateChild(e,i){return this.checkAuth(e)}checkAuth(e){if(!this.authService.isLoggedIn())return this.router.navigate(["/auth/login"],{queryParams:{returnUrl:e.url.join("/")}}),!1;let i=e.data.roles;if(!i||i.length===0)return!0;let r=localStorage.getItem("user_role");return!r||!i.includes(r)?(this.router.navigate(["/unauthorized"]),!1):!0}static{this.\u0275fac=function(i){return new(i||t)(N(S),N(U))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var pt=[{path:"home",component:ct,children:[{path:"",component:rt}]},{path:"auth",children:[{path:"login",loadComponent:()=>import("./chunk-4DO7GBPN.js").then(t=>t.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-AFNYZHYF.js").then(t=>t.RegisterComponent)}]},{path:"student",component:R,canActivate:[F],data:{roles:[Q.STUDENT]},children:[{path:"dashboard",loadComponent:()=>import("./chunk-2VF2LYGP.js").then(t=>t.StudentDashboardComponent)},{path:"applications",loadComponent:()=>import("./chunk-LD5OUC2A.js").then(t=>t.StudentApplicationsComponent)},{path:"agreements",loadComponent:()=>import("./chunk-YCIBYFCV.js").then(t=>t.StudentAgreementsComponent)},{path:"apply/:id",loadComponent:()=>import("./chunk-O7GXV3SD.js").then(t=>t.SubmitApplicationComponent)},{path:"test",loadComponent:()=>import("./chunk-7WTP33XZ.js").then(t=>t.StudentTestComponent)}]},{path:"company",component:R,canActivate:[F],data:{roles:[Q.COMPANY]},children:[{path:"dashboard",loadComponent:()=>import("./chunk-636GJPQ3.js").then(t=>t.CompanyDashboardComponent)},{path:"offers",loadComponent:()=>import("./chunk-Y5HNVQ2U.js").then(t=>t.CompanyOffersComponent)},{path:"applications",loadComponent:()=>import("./chunk-6ARCJVXP.js").then(t=>t.CompanyApplicationsComponent)},{path:"agreements",loadComponent:()=>import("./chunk-HUREUT2O.js").then(t=>t.CompanyAgreementsComponent)},{path:"reports",loadComponent:()=>import("./chunk-DMTNFCT7.js").then(t=>t.CompanyReportsComponent)}]},{path:"faculty",component:R,canActivate:[F],data:{roles:[Q.FACULTY]},children:[{path:"dashboard",loadComponent:()=>import("./chunk-WCW4K6RA.js").then(t=>t.FacultyDashboardComponent)},{path:"students",loadComponent:()=>import("./chunk-6LMDJ67A.js").then(t=>t.FacultyStudentsComponent)},{path:"companies",loadComponent:()=>import("./chunk-N2PGHEMS.js").then(t=>t.FacultyCompaniesComponent)},{path:"agreements",loadComponent:()=>import("./chunk-ARJWQRYJ.js").then(t=>t.FacultyAgreementsComponent)},{path:"reports",loadComponent:()=>import("./chunk-CTV4WINE.js").then(t=>t.FacultyReportsComponent)}]},{path:"admin",component:R,canActivate:[F],data:{roles:[Q.ADMIN]},children:[{path:"dashboard",loadComponent:()=>import("./chunk-6Y6LP7ZF.js").then(t=>t.AdminDashboardComponent)},{path:"users",loadComponent:()=>import("./chunk-CZW6V6KN.js").then(t=>t.AdminUsersComponent)},{path:"companies",loadComponent:()=>import("./chunk-EG3V4AC6.js").then(t=>t.AdminCompanyComponent)},{path:"settings",loadComponent:()=>import("./chunk-TVIPCOIW.js").then(t=>t.AdminSettingComponent)},{path:"reports",loadComponent:()=>import("./chunk-G4ZJ4QPI.js").then(t=>t.AdminReportsComponent)}]},{path:"offers",component:R,canActivate:[F],children:[{path:"",loadComponent:()=>import("./chunk-3NSEJQEI.js").then(t=>t.OffersListComponent)}]},{path:"profile",component:R,canActivate:[F],children:[{path:"",loadComponent:()=>import("./chunk-6BFOTLJ2.js").then(t=>t.StudentProfileComponent)}]},{path:"unauthorized",loadComponent:()=>import("./chunk-CWGNVA6J.js").then(t=>t.UnauthorizedComponent)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"**",redirectTo:"home"}];var ri="@",ai=(()=>{class t{constructor(e,i,r,m,y){this.doc=e,this.delegate=i,this.zone=r,this.animationType=m,this.moduleImpl=y,this._rendererFactoryPromise=null,this.scheduler=J(Ee,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-WADVD5GS.js")).catch(i=>{throw new xe(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:r})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let m=new r(this.delegate,this._engine,this.zone);return this.delegate=m,m})}createRenderer(e,i){let r=this.delegate.createRenderer(e,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let m=new ce(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(y=>{let oe=y.createRenderer(e,i);m.use(oe)}).catch(y=>{m.use(r)}),m}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){we()}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),ce=class{constructor(a){this.delegate=a,this.replay=[],this.\u0275type=1}use(a){if(this.delegate=a,this.replay!==null){for(let e of this.replay)e(a);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(a,e){return this.delegate.createElement(a,e)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}get destroyNode(){return this.delegate.destroyNode}appendChild(a,e){this.delegate.appendChild(a,e)}insertBefore(a,e,i,r){this.delegate.insertBefore(a,e,i,r)}removeChild(a,e,i){this.delegate.removeChild(a,e,i)}selectRootElement(a,e){return this.delegate.selectRootElement(a,e)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,e,i,r){this.delegate.setAttribute(a,e,i,r)}removeAttribute(a,e,i){this.delegate.removeAttribute(a,e,i)}addClass(a,e){this.delegate.addClass(a,e)}removeClass(a,e){this.delegate.removeClass(a,e)}setStyle(a,e,i,r){this.delegate.setStyle(a,e,i,r)}removeStyle(a,e,i){this.delegate.removeStyle(a,e,i)}setProperty(a,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(a,e,i)),this.delegate.setProperty(a,e,i)}setValue(a,e){this.delegate.setValue(a,e)}listen(a,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(a,e,i)),this.delegate.listen(a,e,i)}shouldReplay(a){return this.replay!==null&&a.startsWith(ri)}};function ut(t="animations"){return Ie("NgAsyncAnimations"),be([{provide:ke,useFactory:(a,e,i)=>new ai(a,e,i,t),deps:[ze,$e,Ae]},{provide:Ce,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ht=(t,a)=>{let r=J(ye).get(S).getToken();if(r){let m=t.clone({headers:t.headers.set("Authorization",`Bearer ${r}`)});return a(m)}return a(t)};var ft=(t,a)=>{let e=Date.now();return console.log(`\u{1F310} HTTP ${t.method} Request:`,{url:t.url,method:t.method,headers:Object.fromEntries(t.headers.keys().map(i=>[i,t.headers.get(i)])),body:t.body,timestamp:new Date().toISOString()}),a(t).pipe(T(i=>{let r=Date.now()-e;console.log(`\u2705 HTTP ${t.method} Success:`,{url:t.url,status:i.status||"unknown",duration:`${r}ms`,response:i,timestamp:new Date().toISOString()})}),_(i=>{let r=Date.now()-e;return console.error(`\u274C HTTP ${t.method} Error:`,{url:t.url,status:i.status,statusText:i.statusText,duration:`${r}ms`,error:i.error,message:i.message,timestamp:new Date().toISOString()}),fe(()=>i)}))};var Y=(()=>{class t{constructor(e,i,r,m,y,oe,yt){this.apiService=e,this.authService=i,this.offerService=r,this.applicationService=m,this.agreementService=y,this.userService=oe,this.companyService=yt,this.connectionStatus={backend:!1,auth:!1,offers:!1,applications:!1,agreements:!1,users:!1,companies:!1},console.log("\u{1F517} ApiConnectorService initialized"),this.initializeConnections()}initializeConnections(){console.log("\u{1F680} Initializing API connections..."),this.testAllConnections().subscribe({next:e=>{console.log("\u2705 API connections test completed:",e)},error:e=>{console.error("\u274C API connections test failed:",e)}})}testAllConnections(){let e={backend:this.apiService.get("/health").pipe(T(()=>this.connectionStatus.backend=!0),_(()=>(this.connectionStatus.backend=!1,E({status:"Backend connection failed"})))),skills:this.apiService.getAllSkills().pipe(T(()=>console.log("\u2705 Skills API connected")),_(()=>E({error:"Skills API failed"}))),domains:this.apiService.getAllDomains().pipe(T(()=>console.log("\u2705 Domains API connected")),_(()=>E({error:"Domains API failed"}))),sectors:this.apiService.getAllSectors().pipe(T(()=>console.log("\u2705 Sectors API connected")),_(()=>E({error:"Sectors API failed"}))),offers:this.offerService.getOffers(0,1).pipe(T(()=>{this.connectionStatus.offers=!0,console.log("\u2705 Offers API connected")}),_(()=>(this.connectionStatus.offers=!1,E({error:"Offers API failed"}))))};return se(e).pipe(ge(i=>ae(re({},i),{connectionStatus:this.connectionStatus,timestamp:new Date().toISOString()})))}getConnectionStatus(){return ae(re({},this.connectionStatus),{overall:Object.values(this.connectionStatus).every(e=>e),timestamp:new Date().toISOString()})}testEndpoint(e){return console.log(`\u{1F50D} Testing endpoint: ${e}`),this.apiService.get(e).pipe(T(i=>console.log(`\u2705 Endpoint ${e} responded:`,i)),_(i=>(console.error(`\u274C Endpoint ${e} failed:`,i),E({error:`Endpoint ${e} failed`,details:i}))))}initializeUserSession(){let e=this.authService.getCurrentUser();if(!e)return E({error:"No authenticated user"});console.log("\u{1F464} Initializing user session for:",e.email);let i={profile:this.userService.getCurrentUser().pipe(_(()=>E({error:"Failed to load user profile"}))),skills:this.apiService.getAllSkills().pipe(_(()=>E([]))),domains:this.apiService.getAllDomains().pipe(_(()=>E([]))),sectors:this.apiService.getAllSectors().pipe(_(()=>E([])))};return se(i).pipe(T(r=>console.log("\u2705 User session initialized:",r)))}refreshAllData(){return console.log("\u{1F504} Refreshing all data..."),this.testAllConnections().pipe(T(()=>console.log("\u2705 All data refreshed")))}static{this.\u0275fac=function(i){return new(i||t)(N(et),N(S),N(ee),N(tt),N(it),N(nt),N(ot))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Z=(()=>{class t{constructor(e,i){this.apiConnector=e,this.authService=i}initializeApp(){return console.log("\u{1F680} Initializing application..."),new pe(e=>{console.log("\u{1F4E1} Step 1: Testing backend connectivity..."),this.apiConnector.testAllConnections().pipe(T(i=>{console.log("\u2705 Backend connectivity test completed:",i)}),_(i=>(console.error("\u274C Backend connectivity test failed:",i),E({error:"Backend connection failed"})))).subscribe({next:i=>{this.authService.isLoggedIn()?(console.log("\u{1F464} Step 2: User is logged in, initializing session..."),this.apiConnector.initializeUserSession().pipe(T(r=>{console.log("\u2705 User session initialized:",r)}),_(r=>(console.error("\u274C User session initialization failed:",r),E({error:"Session initialization failed"})))).subscribe({next:r=>{e.next({connectionResults:i,sessionData:r,status:"success",message:"Application initialized successfully"}),e.complete()},error:r=>{e.next({connectionResults:i,sessionData:null,status:"partial",message:"Application initialized with session errors",error:r}),e.complete()}})):(console.log("\u{1F464} Step 2: No user logged in, skipping session initialization"),e.next({connectionResults:i,sessionData:null,status:"success",message:"Application initialized successfully (no user session)"}),e.complete())},error:i=>{e.next({connectionResults:null,sessionData:null,status:"error",message:"Application initialization failed",error:i}),e.complete()}})})}getAppStatus(){return{backendConnection:this.apiConnector.getConnectionStatus(),userAuthenticated:this.authService.isLoggedIn(),currentUser:this.authService.getCurrentUser(),timestamp:new Date().toISOString()}}reinitialize(){return console.log("\u{1F504} Reinitializing application..."),this.initializeApp()}static{this.\u0275fac=function(i){return new(i||t)(N(Y),N(S))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function vt(t){return()=>new Promise(a=>{t.initializeApp().subscribe({next:e=>{console.log("\u{1F3AF} App initialization completed:",e),a(e)},error:e=>{console.error("\u{1F4A5} App initialization failed:",e),a({error:"Initialization failed"})}})})}var xt={providers:[Ze(pt),Ge(He([ft,ht])),ut(),Se(b),te,Y,Z,{provide:Re,useFactory:vt,deps:[Z],multi:!0}]};function li(t,a){t&1&&(p(),n(0,"svg",17),c(1,"path",18),o())}function ci(t,a){t&1&&(p(),n(0,"svg",19),c(1,"path",20),o())}function di(t,a){t&1&&(p(),n(0,"svg",21),c(1,"path",22),o())}function mi(t,a){t&1&&(p(),n(0,"svg",23),c(1,"path",24),o())}function pi(t,a){if(t&1){let e=M();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),f(4,li,2,0,"svg",6)(5,ci,2,0,"svg",7)(6,di,2,0,"svg",8)(7,mi,2,0,"svg",9),o(),n(8,"div",10)(9,"p",11),s(10),o(),n(11,"p",12),s(12),Le(13,"date"),o()(),n(14,"div",13)(15,"button",14),g("click",function(){let r=k(e).$implicit,m=u();return I(m.removeNotification(r.id))}),p(),n(16,"svg",15),c(17,"path",16),o()()()()()()}if(t&2){let e=a.$implicit,i=a.index,r=u();Te("transform","translateY("+i*10+"px)")("z-index",50-i),d("ngClass",r.getNotificationClass(e.type)),l(4),d("ngIf",e.type==="success"),l(),d("ngIf",e.type==="error"),l(),d("ngIf",e.type==="warning"),l(),d("ngIf",e.type==="info"),l(3),A(" ",e.message," "),l(2),A(" ",je(13,11,e.timestamp,"short")," ")}}var bt=(()=>{class t{constructor(e){this.notificationService=e,this.notifications=[],this.visibleNotifications=[],this.subscription=new me,this.notificationQueue=[],this.isProcessingQueue=!1}ngOnInit(){this.subscription.add(this.notificationService.getNotifications().subscribe(e=>{let i=e.filter(r=>!this.notifications.some(m=>m.id===r.id));this.notifications=e,i.length>0&&(this.notificationQueue.push(...i),this.processQueue())}))}processQueue(){return de(this,null,function*(){if(!(this.isProcessingQueue||this.notificationQueue.length===0)){for(this.isProcessingQueue=!0;this.notificationQueue.length>0;){let e=this.notificationQueue.shift();this.visibleNotifications.length>=3&&this.visibleNotifications.pop(),this.visibleNotifications.unshift(e),yield new Promise(i=>setTimeout(i,500))}this.isProcessingQueue=!1}})}ngOnDestroy(){this.subscription.unsubscribe()}removeNotification(e){this.visibleNotifications=this.visibleNotifications.filter(i=>i.id!==e),this.notificationService.removeNotification(e)}getNotificationClass(e){let i="border-l-4 ";switch(e){case"success":return i+"border-green-400 bg-green-50";case"error":return i+"border-red-400 bg-red-50";case"warning":return i+"border-yellow-400 bg-yellow-50";case"info":return i+"border-blue-400 bg-blue-50";default:return i+"border-gray-400 bg-gray-50"}}static{this.\u0275fac=function(i){return new(i||t)(h($))}}static{this.\u0275cmp=C({type:t,selectors:[["app-notification-toast"]],standalone:!0,features:[w],decls:2,vars:1,consts:[[1,"fixed","top-4","right-4","z-50","space-y-3"],["class","w-[450px] bg-white shadow-xl rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden transition-all duration-300 ease-in-out animate-slide-in",3,"ngClass","transform","z-index",4,"ngFor","ngForOf"],[1,"w-[450px]","bg-white","shadow-xl","rounded-lg","pointer-events-auto","ring-1","ring-black","ring-opacity-5","overflow-hidden","transition-all","duration-300","ease-in-out","animate-slide-in",3,"ngClass"],[1,"p-4"],[1,"flex","items-start"],[1,"flex-shrink-0"],["class","h-6 w-6 text-green-400","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","h-6 w-6 text-red-400","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","h-6 w-6 text-yellow-400","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","h-6 w-6 text-blue-400","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"ml-3","w-0","flex-1","pt-0.5"],[1,"text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"ml-4","flex-shrink-0","flex"],[1,"bg-white","rounded-md","inline-flex","text-gray-400","hover:text-gray-500","focus:outline-none","transition-colors",3,"click"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-yellow-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(i,r){i&1&&(n(0,"div",0),f(1,pi,18,14,"div",1),o()),i&2&&(l(),d("ngForOf",r.visibleNotifications))},dependencies:[b,L,j,P,Be],styles:["@keyframes _ngcontent-%COMP%_slide-in{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.animate-slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in .3s ease-out}"]})}}return t})();var ui=(t,a)=>({"text-green-600":t,"text-red-600":a});function hi(t,a){if(t&1&&(n(0,"span",11),s(1),o()),t&2){let e=u(2);l(),A(" \u{1F464} ",e.currentUserRole," ")}}function fi(t,a){t&1&&c(0,"div",12)}function gi(t,a){if(t&1){let e=M();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),s(4,"\u{1F527} Mode D\xE9veloppement - \xC9tat API"),o(),n(5,"div",6)(6,"span",7),s(7),o(),f(8,hi,2,1,"span",8),n(9,"button",9),g("click",function(){k(e);let r=u();return I(r.toggleApiStatus())}),s(10),o()()(),f(11,fi,1,0,"div",10),o()()}if(t&2){let e=u();l(6),d("ngClass",K(5,ui,e.apiStatus==null?null:e.apiStatus.overall,!(e.apiStatus!=null&&e.apiStatus.overall))),l(),A(" ",e.apiStatus!=null&&e.apiStatus.overall?"\u2705 Backend Connect\xE9":"\u274C Backend D\xE9connect\xE9"," "),l(),d("ngIf",e.isAuthenticated),l(2),A(" ",e.showDetailedStatus?"\u25BC":"\u25B6"," D\xE9tails "),l(),d("ngIf",e.showDetailedStatus)}}var St=(()=>{class t{constructor(e,i,r,m,y){this.domMonitor=e,this.apiConnector=i,this.appInitializer=r,this.authService=m,this.webSocketService=y,this.title="stagerichy48",this.showApiStatus=!window.location.href.includes("production"),this.showDetailedStatus=!1,this.apiStatus=null,this.isAuthenticated=!1,this.currentUserRole=null,console.log("\u{1F680} AppComponent constructor called"),console.log("\u{1F4F1} Application starting...",{title:this.title,userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString()})}ngOnInit(){if(console.log("\u2705 AppComponent initialized"),this.domMonitor.logComponentLoad("AppComponent"),console.log("\u{1F30D} Environment info:",{production:!window.location.href.includes("localhost"),protocol:window.location.protocol,host:window.location.host,pathname:window.location.pathname}),console.log("\u{1F517} API Connection Status:",this.apiConnector.getConnectionStatus()),console.log("\u{1F464} Authentication Status:",{isLoggedIn:this.authService.isLoggedIn(),currentUser:this.authService.getCurrentUser(),userRole:this.authService.getCurrentUserRole()}),console.log("\u{1F3AF} App Status:",this.appInitializer.getAppStatus()),this.updateStatus(),this.authService.isLoggedIn()){let e=this.authService.getCurrentUser();e?.id&&this.webSocketService.connect(e.id.toString())}}updateStatus(){this.apiStatus=this.apiConnector.getConnectionStatus(),this.isAuthenticated=this.authService.isLoggedIn(),this.currentUserRole=this.authService.getCurrentUserRole()}toggleApiStatus(){this.showDetailedStatus=!this.showDetailedStatus}static{this.\u0275fac=function(i){return new(i||t)(h(te),h(Y),h(Z),h(S),h(ne))}}static{this.\u0275cmp=C({type:t,selectors:[["app-root"]],standalone:!0,features:[w],decls:4,vars:1,consts:[[1,"min-h-screen","bg-gray-50"],["class","bg-blue-50 border-b border-blue-200 p-2",4,"ngIf"],[1,"bg-blue-50","border-b","border-blue-200","p-2"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-blue-700"],[1,"flex","items-center","space-x-4"],[3,"ngClass"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600","hover:text-blue-800",3,"click"],["class","mt-2 p-3 bg-white rounded border",4,"ngIf"],[1,"text-blue-600"],[1,"mt-2","p-3","bg-white","rounded","border"]],template:function(i,r){i&1&&(n(0,"div",0),f(1,gi,12,8,"div",1),c(2,"router-outlet")(3,"app-notification-toast"),o()),i&2&&(l(),d("ngIf",r.showApiStatus))},dependencies:[G,b,L,P,bt]})}}return t})();We(St,xt).catch(t=>console.error(t));

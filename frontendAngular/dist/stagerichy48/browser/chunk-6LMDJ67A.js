import{a as T}from"./chunk-YRUNILEP.js";import{a as N}from"./chunk-GDEHS6TE.js";import"./chunk-SX46PIGY.js";import"./chunk-SNFTPR3R.js";import"./chunk-ZS4G4JJV.js";import"./chunk-4QFA7BNO.js";import{$a as u,Aa as g,Oa as m,Qa as d,Qb as F,Rb as I,Ua as s,Va as r,Wb as w,Za as S,_ as h,_a as b,eb as l,fb as _,gb as c,ha as x,hb as C,ia as y,n as f,nb as E,z as v,za as i}from"./chunk-CZ4BJCOO.js";function D(t,a){t&1&&(s(0,"div",7)(1,"p"),l(2,"\u{1F504} Chargement des \xE9tudiants..."),r()())}function U(t,a){if(t&1){let e=S();s(0,"div",8)(1,"p",9),l(2),r(),s(3,"button",10),b("click",function(){x(e);let o=u();return y(o.loadStudents())}),l(4," R\xE9essayer "),r()()}if(t&2){let e=u();i(2),c("\u274C ",e.error,"")}}function A(t,a){t&1&&(s(0,"div",16)(1,"p",17),l(2,"\u{1F465} Aucun \xE9tudiant trouv\xE9"),r()())}function k(t,a){if(t&1&&(s(0,"div",21)(1,"div",22)(2,"div",23)(3,"span",24),l(4),r()(),s(5,"div",25)(6,"h3",26),l(7),r(),s(8,"p",27),l(9),r()()()()),t&2){let e=a.$implicit;i(4),c(" ",((e.firstName==null?null:e.firstName.charAt(0))||"")+((e.lastName==null?null:e.lastName.charAt(0))||"")," "),i(3),C("",e.firstName," ",e.lastName,""),i(2),_(e.email)}}function M(t,a){if(t&1&&(s(0,"div",18)(1,"div",19),m(2,k,10,4,"div",20),r()()),t&2){let e=u(2);i(2),d("ngForOf",e.students)}}function j(t,a){if(t&1&&(s(0,"div",11)(1,"div",12)(2,"h2",13),l(3),r()(),m(4,A,3,0,"div",14)(5,M,3,1,"div",15),r()),t&2){let e=u();i(3),c("\xC9tudiants (",e.students.length,")"),i(),d("ngIf",e.students.length===0),i(),d("ngIf",e.students.length>0)}}var $=(()=>{class t{constructor(e,n){this.userService=e,this.authService=n,this.students=[],this.loading=!1,this.error=null,console.log("\u{1F393} FacultyStudentsComponent initialized")}ngOnInit(){console.log("\u{1F4DA} Loading students..."),this.loadStudents()}loadStudents(){console.log("\u{1F4CB} Starting loadStudents...");let e=this.authService.getCurrentUser();if(console.log("\u{1F464} Current user:",e),!e){console.error("\u274C No authenticated user found"),this.error="Utilisateur non authentifi\xE9";return}this.loading=!0,this.error=null,console.log("\u{1F680} Calling UserService.getStudentsForFaculty..."),this.userService.getStudentsForFaculty(0,20).pipe(v(n=>(console.error("\u274C API Error:",n),console.log("\u{1F504} Using fallback data..."),f({content:[{id:1,firstName:"Jean",lastName:"Dupont",email:"jean.dupont@student.fr",role:"STUDENT",enabled:!0},{id:2,firstName:"Marie",lastName:"Martin",email:"marie.martin@student.fr",role:"STUDENT",enabled:!0}],totalElements:2})))).subscribe({next:n=>{console.log("\u{1F4E6} Raw API response:",n);let o=n.content||n;console.log("\u{1F4C4} All users:",o),Array.isArray(o)?this.students=o.filter(p=>(console.log("\u{1F50D} Checking user:",p.email,"Role:",p.role),p.role==="STUDENT")):(console.error("\u274C allUsers is not an array:",typeof o),this.students=[]),console.log("\u2705 Filtered students:",this.students),console.log("\u{1F4CA} Final count:",this.students.length),this.loading=!1},error:n=>{console.error("\u274C Subscribe error:",n),this.error="Erreur lors du chargement",this.loading=!1}})}static{this.\u0275fac=function(n){return new(n||t)(g(T),g(N))}}static{this.\u0275cmp=h({type:t,selectors:[["app-faculty-students"]],standalone:!0,features:[E],decls:9,vars:4,consts:[[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","p-6"],[1,"text-2xl","font-bold","text-primary-900","mb-2"],[1,"text-primary-600"],["class","bg-white rounded-lg shadow-sm border  p-8 text-center",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border ",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-sm","border","p-8","text-center"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6"],[1,"text-red-800"],[1,"mt-2","bg-red-600","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-white","rounded-lg","shadow-sm","border"],[1,"p-6","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-primary-900"],["class","p-8 text-center",4,"ngIf"],["class","p-6",4,"ngIf"],[1,"p-8","text-center"],[1,"text-gray-500"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","border border-gray-200 rounded-lg p-4",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-4"],[1,"flex","items-center"],[1,"w-10","h-10","bg-primary-600","rounded-full","flex","items-center","justify-center"],[1,"text-white","font-bold","text-sm"],[1,"ml-3"],[1,"font-semibold","text-gray-900"],[1,"text-gray-600","text-sm"]],template:function(n,o){n&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"Liste des \xC9tudiants"),r(),s(4,"p",3),l(5),r()(),m(6,D,3,0,"div",4)(7,U,5,1,"div",5)(8,j,6,3,"div",6),r()),n&2&&(i(5),c("",o.students.length," \xE9tudiants trouv\xE9s"),i(),d("ngIf",o.loading),i(),d("ngIf",o.error),i(),d("ngIf",!o.loading&&!o.error))},dependencies:[w,F,I]})}}return t})();export{$ as FacultyStudentsComponent};

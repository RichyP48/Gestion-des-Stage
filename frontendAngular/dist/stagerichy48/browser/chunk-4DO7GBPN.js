import{a as z}from"./chunk-PLIYC6U5.js";import{a as M,b as h,c as N,d as T,g as q,i as j,j as A,n as D,o as V,q as G}from"./chunk-OYOJ2XX2.js";import{e as I,f as k}from"./chunk-KFQQY7Q4.js";import{a as R}from"./chunk-GDEHS6TE.js";import"./chunk-SX46PIGY.js";import"./chunk-SNFTPR3R.js";import"./chunk-ZS4G4JJV.js";import"./chunk-4QFA7BNO.js";import{$a as v,Aa as g,Oa as p,Pb as F,Qa as a,Rb as L,Ua as o,Va as n,Wa as u,Wb as E,_ as y,_a as w,eb as s,gb as C,ja as _,nb as S,ob as x,za as l}from"./chunk-CZ4BJCOO.js";var P=t=>({"border-red-500":t});function U(t,m){t&1&&(o(0,"span"),s(1,"Email requis."),n())}function B(t,m){t&1&&(o(0,"span"),s(1,"Email invalide."),n())}function O(t,m){if(t&1&&(o(0,"div",24),p(1,U,2,0,"span",13)(2,B,2,0,"span",13),n()),t&2){let i,r,e=v();l(),a("ngIf",(i=e.loginForm.get("email"))==null||i.errors==null?null:i.errors.required),l(),a("ngIf",(r=e.loginForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function Y(t,m){t&1&&(o(0,"span"),s(1,"Mot de passe requis."),n())}function H(t,m){if(t&1&&(o(0,"div",24),p(1,Y,2,0,"span",13),n()),t&2){let i,r=v();l(),a("ngIf",(i=r.loginForm.get("password"))==null||i.errors==null?null:i.errors.required)}}function J(t,m){if(t&1&&(o(0,"div",25),s(1),n()),t&2){let i=v();l(),C(" ",i.errorMessage," ")}}function K(t,m){t&1&&(o(0,"span"),s(1,"Se connecter"),n())}function Q(t,m){t&1&&(o(0,"span",26),_(),o(1,"svg",27),u(2,"circle",28)(3,"path",29),n(),s(4," Connexion... "),n())}var ne=(()=>{class t{constructor(i,r,e,d){this.fb=i,this.router=r,this.authService=e,this.domMonitor=d,this.isLoading=!1,this.errorMessage="",console.log("\u{1F511} LoginComponent constructor"),this.loginForm=this.fb.group({email:["",[h.required,h.email]],password:["",[h.required]]}),console.log("\u{1F4DD} Login form created with validators")}ngOnInit(){console.log("\u2705 LoginComponent initialized"),this.domMonitor.logComponentLoad("LoginComponent"),this.loginForm.valueChanges.subscribe(i=>{console.log("\u{1F4DD} Form values changed:",{email:i.email,hasPassword:!!i.password,formValid:this.loginForm.valid})})}onSubmit(){if(console.log("\u{1F4E4} Login form submitted"),console.log("\u{1F50D} Form validation status:",{valid:this.loginForm.valid,errors:this.loginForm.errors,emailErrors:this.loginForm.get("email")?.errors,passwordErrors:this.loginForm.get("password")?.errors}),this.loginForm.valid){this.isLoading=!0,this.errorMessage="";let i=this.loginForm.value;console.log("\u{1F680} Starting login process for:",i.email),this.authService.login(i).subscribe({next:r=>{console.log("\u2705 Login successful, redirecting based on role:",r.role),this.isLoading=!1;let e="/home";switch(r.role){case"STUDENT":e="/student/dashboard";break;case"COMPANY":e="/company/dashboard";break;case"FACULTY":e="/faculty/dashboard";break;case"ADMIN":e="/admin/dashboard";break}console.log("\u{1F9E7} Navigating to:",e),this.router.navigate([e])},error:r=>{console.error("\u274C Login failed:",r),this.isLoading=!1,this.errorMessage=r.message||"Erreur de connexion"}})}else console.log("\u274C Form is invalid, cannot submit")}static{this.\u0275fac=function(r){return new(r||t)(g(V),g(I),g(R),g(z))}}static{this.\u0275cmp=y({type:t,selectors:[["app-login"]],standalone:!0,features:[S],decls:32,vars:13,consts:[[1,"flex"],[1,"h-screen","flex","flex-col","items-center","justify-center","bg-gradient-to-r","from-[#2dd4bf]","to-[#1f2937]","w-full"],[1,"w-full","max-w-md","p-8","space-y-6","bg-transparent","rounded-lg","shadow-md",2,"backdrop-filter","blur(8px)","-webkit-backdrop-filter","blur(8px)","background-color","rgba(255, 255, 255, 0.1)"],[1,"text-2xl","font-bold","text-center","text-gray-900"],[1,"space-y-2",3,"ngSubmit","formGroup"],[1,"rounded-md","shadow-sm"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email","type","email","required","",1,"block","w-full","px-3","py-2","mt-1","placeholder-gray-400","border","border-gray-300","rounded-md","shadow-sm","appearance-none","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["class","mt-1 text-xs text-red-600",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password","required","",1,"block","w-full","px-3","py-2","mt-1","placeholder-gray-400","border","border-gray-300","rounded-md","shadow-sm","appearance-none","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["class","p-3 text-sm text-red-700 bg-red-100 border border-red-400 rounded-md",4,"ngIf"],["type","submit",1,"flex","justify-center","w-full","px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","border","border-transparent","rounded-md","shadow-sm","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"mt-4","text-sm","text-center","text-gray-600"],["routerLink","/auth/register",1,"font-medium","text-primary-600","hover:text-primary-500"],[1,"w-full"],[1,"w-full","h-screen","relative","bg-amber-200","inset-0","bg-cover","bg-center",2,"background-image","url('/slider.jpg')"],[1,"absolute","inset-0","overflow-hidden","bg-gradient-to-r","from-[#2dd4bf]","to-[#1f2937]","opacity-50"],[1,"absolute","inset-0","overflow-hidden","bg-gradient-to-r","from-primary-800","via-primary-700","to-primary-900","opacity-90"],[1,"absolute","bottom-0","right-0","w-96","h-96","bg-gradient-to-r","bg-[#2dd4bf]","to-[#1f2937]","rounded-full","blur-3xl","animate-pulse"],[1,"absolute","bottom-0","right-0","w-64","h-64","bg-orange-400","rounded-full","blur-3xl","animate-pulse"],[1,"absolute","top-1/2","left-1/3","w-48","h-48","bg-primary-400","rounded-full","blur-3xl","animate-pulse"],[1,"mt-1","text-xs","text-red-600"],[1,"p-3","text-sm","text-red-700","bg-red-100","border","border-red-400","rounded-md"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"w-5","h-5","mr-3","-ml-1","text-white","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(r,e){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Connexion "),n(),o(5,"form",4),w("ngSubmit",function(){return e.onSubmit()}),o(6,"div",5)(7,"label",6),s(8,"Adresse email"),n(),u(9,"input",7),p(10,O,3,2,"div",8),n(),o(11,"div",5)(12,"label",9),s(13,"Mot de passe"),n(),u(14,"input",10),p(15,H,2,1,"div",8),n(),p(16,J,2,1,"div",11),o(17,"div",5)(18,"button",12),p(19,K,2,0,"span",13)(20,Q,5,0,"span",14),n()()(),o(21,"p",15),s(22," Pas de compte ? "),o(23,"a",16),s(24," S'inscrire ici "),n()()()(),o(25,"div",17)(26,"div",18),u(27,"div",19),o(28,"div",20),u(29,"div",21)(30,"div",22)(31,"div",23),n()()()()),r&2){let d,c,f,b;l(5),a("formGroup",e.loginForm),l(4),a("ngClass",x(9,P,((d=e.loginForm.get("email"))==null?null:d.invalid)&&((d=e.loginForm.get("email"))==null?null:d.touched))),l(),a("ngIf",((c=e.loginForm.get("email"))==null?null:c.invalid)&&((c=e.loginForm.get("email"))==null?null:c.touched)),l(4),a("ngClass",x(11,P,((f=e.loginForm.get("password"))==null?null:f.invalid)&&((f=e.loginForm.get("password"))==null?null:f.touched))),l(),a("ngIf",((b=e.loginForm.get("password"))==null?null:b.invalid)&&((b=e.loginForm.get("password"))==null?null:b.touched)),l(),a("ngIf",e.errorMessage),l(2),a("disabled",e.loginForm.invalid||e.isLoading),l(),a("ngIf",!e.isLoading),l(),a("ngIf",e.isLoading)}},dependencies:[E,F,L,k,G,q,M,N,T,D,j,A]})}}return t})();export{ne as LoginComponent};

import{a as F}from"./chunk-4WYR6RPK.js";import"./chunk-KFQQY7Q4.js";import{a as V}from"./chunk-GDEHS6TE.js";import"./chunk-SX46PIGY.js";import"./chunk-SNFTPR3R.js";import"./chunk-ZS4G4JJV.js";import"./chunk-4QFA7BNO.js";import{$a as g,Aa as C,Oa as h,Pb as I,Qa as s,Qb as P,Rb as M,Ua as e,Va as t,Wa as d,Wb as T,Za as _,_ as E,_a as f,eb as i,fb as p,gb as v,ha as x,ia as y,ib as w,ja as m,ka as c,n as b,nb as k,z as S,za as r}from"./chunk-CZ4BJCOO.js";function j(o,u){o&1&&(e(0,"span"),i(1,"\u{1F504} Actualisation..."),t())}function L(o,u){o&1&&(e(0,"span"),i(1,"\u{1F504} Actualiser"),t())}function A(o,u){o&1&&(e(0,"div",28)(1,"div",29),m(),e(2,"svg",30),d(3,"circle",31)(4,"path",32),t(),i(5," Chargement des entreprises... "),t()())}function D(o,u){o&1&&(e(0,"div",28),m(),e(1,"svg",33),d(2,"path",12),t(),c(),e(3,"h3",34),i(4,"Aucune entreprise"),t(),e(5,"p",35),i(6,"Aucune entreprise n'est enregistr\xE9e dans le syst\xE8me."),t()())}function z(o,u){if(o&1&&(e(0,"div",39)(1,"div",40)(2,"div",9)(3,"div",41)(4,"span",42),i(5),t()(),e(6,"div",43)(7,"h3",44),i(8),t(),e(9,"p",45),i(10),t()()(),e(11,"span",46),i(12),t()(),e(13,"div",47)(14,"div",48),m(),e(15,"svg",49),d(16,"path",50)(17,"path",51),t(),i(18),t(),c(),e(19,"div",48),m(),e(20,"svg",49),d(21,"path",52),t(),i(22),t(),c(),e(23,"div",48),m(),e(24,"svg",49),d(25,"path",53),t(),i(26),t()(),c(),e(27,"div",54)(28,"div",55)(29,"span",56),i(30,"Offres actives:"),t(),e(31,"span",57),i(32),t()(),e(33,"button",58),i(34," Voir d\xE9tails "),t()()()),o&2){let n=u.$implicit,a=g(2);r(5),p(a.getCompanyInitials(n.name)),r(3),p(n.name),r(2),p(n.sector),r(),s("ngClass",a.getStatusClass(n.enabled)),r(),v(" ",n.enabled?"Active":"Inactive"," "),r(6),v(" ",n.address," "),r(4),v(" ",n.contactEmail," "),r(4),v(" ",n.contactPhone," "),r(6),p(n.offersCount||0)}}function H(o,u){if(o&1&&(e(0,"div",36)(1,"div",37),h(2,z,35,9,"div",38),t()()),o&2){let n=g();r(2),s("ngForOf",n.companies)}}function G(o,u){if(o&1){let n=_();e(0,"div",59)(1,"div",60)(2,"div",61),i(3),t(),e(4,"div",62)(5,"button",63),f("click",function(){x(n);let l=g();return y(l.previousPage())}),i(6," Pr\xE9c\xE9dent "),t(),e(7,"button",63),f("click",function(){x(n);let l=g();return y(l.nextPage())}),i(8," Suivant "),t()()()()}if(o&2){let n=g();r(3),w(" Page ",n.currentPage+1," sur ",n.totalPages," (",n.totalElements," entreprises au total) "),r(2),s("disabled",n.currentPage===0),r(2),s("disabled",n.currentPage>=n.totalPages-1)}}var K=(()=>{class o{constructor(n,a){this.companyService=n,this.authService=a,this.companies=[],this.loading=!1,this.currentPage=0,this.pageSize=20,this.totalElements=0,this.totalPages=0,this.Math=Math,console.log("\u{1F3E2} FacultyCompaniesComponent initialized")}ngOnInit(){this.loadCompanies()}loadCompanies(){console.log("\u{1F4CB} Loading companies for faculty...");let n=this.authService.getCurrentUser();if(!n){console.error("\u274C No authenticated user found");return}console.log("\u{1F464} Current faculty user:",n),this.loading=!0,this.companyService.getAllCompanies(this.currentPage,this.pageSize).pipe(S(a=>(console.error("\u274C Error loading companies from API:",a),b({content:[{id:1,name:"TechCorp Solutions",address:"123 Rue de la Tech, Paris",sector:"Informatique",contactEmail:"contact@techcorp.com",contactPhone:"+33 1 23 45 67 89",enabled:!0,offersCount:5},{id:2,name:"Innovation Labs",address:"456 Avenue Innovation, Lyon",sector:"R&D",contactEmail:"info@innovlabs.fr",contactPhone:"+33 4 56 78 90 12",enabled:!0,offersCount:3},{id:3,name:"Digital Agency",address:"789 Boulevard Digital, Marseille",sector:"Marketing Digital",contactEmail:"hello@digitalagency.fr",contactPhone:"+33 4 91 23 45 67",enabled:!1,offersCount:0}],totalElements:3,totalPages:1,number:0,size:20})))).subscribe({next:a=>{console.log("\u2705 Companies loaded successfully:",a),this.companies=a.content||a,this.totalElements=a.totalElements||this.companies.length,this.totalPages=a.totalPages||1,this.currentPage=a.number||0,this.loading=!1,console.log("\u{1F4CA} Companies summary:",{total:this.totalElements,pages:this.totalPages,currentPage:this.currentPage,loaded:this.companies.length})},error:a=>{console.error("\u274C Unexpected error loading companies:",a),this.loading=!1}})}refreshCompanies(){console.log("\u{1F504} Refreshing companies list..."),this.loadCompanies()}previousPage(){this.currentPage>0&&(this.currentPage--,this.loadCompanies())}nextPage(){this.currentPage<this.totalPages-1&&(this.currentPage++,this.loadCompanies())}get activeCompaniesCount(){return this.companies.filter(n=>n.enabled).length}get totalOffersCount(){return this.companies.reduce((n,a)=>n+(a.offersCount||0),0)}getCompanyInitials(n){return n.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().substring(0,2)}getStatusClass(n){return n?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}static{this.\u0275fac=function(a){return new(a||o)(C(F),C(V))}}static{this.\u0275cmp=E({type:o,selectors:[["app-faculty-companies"]],standalone:!0,features:[k],decls:50,vars:10,consts:[[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","border","p-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-primary-900","mb-2"],[1,"text-primary-600"],[1,"bg-primary-600","text-white","px-4","py-2","rounded-md","hover:bg-primary-700","disabled:opacity-50",3,"click","disabled"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-white","rounded-lg","shadow-sm","border","border-primary-200","p-6"],[1,"flex","items-center"],[1,"p-3","bg-blue-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"ml-4"],[1,"text-sm","font-medium","text-primary-600"],[1,"text-2xl","font-bold","text-primary-900"],[1,"p-3","bg-green-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-3","bg-orange-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h8z"],[1,"bg-white","rounded-lg","shadow-sm","border","border-primary-200"],[1,"p-6","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-primary-900"],["class","p-8 text-center",4,"ngIf"],["class","p-6",4,"ngIf"],["class","px-6 py-4 border-t border-gray-200",4,"ngIf"],[1,"p-8","text-center"],[1,"inline-flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-primary-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-6","hover:shadow-md","transition-shadow"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-12","h-12","bg-primary-600","rounded-lg","flex","items-center","justify-center"],[1,"text-white","font-bold","text-sm"],[1,"ml-3"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"space-y-2","mb-4"],[1,"flex","items-center","text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],[1,"flex","justify-between","items-center","pt-4","border-t","border-gray-200"],[1,"text-sm"],[1,"text-gray-600"],[1,"font-semibold","text-primary-600","ml-1"],[1,"text-primary-600","hover:text-primary-800","text-sm","font-medium"],[1,"px-6","py-4","border-t","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-700"],[1,"flex","space-x-2"],[1,"px-3","py-1","border","border-gray-300","rounded-md","text-sm","disabled:opacity-50","disabled:cursor-not-allowed","hover:bg-gray-50",3,"click","disabled"]],template:function(a,l){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),i(5,"Gestion des Entreprises"),t(),e(6,"p",4),i(7,"Liste des entreprises partenaires"),t()(),e(8,"button",5),f("click",function(){return l.refreshCompanies()}),h(9,j,2,0,"span",6)(10,L,2,0,"span",6),t()()(),e(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10),m(),e(15,"svg",11),d(16,"path",12),t()(),c(),e(17,"div",13)(18,"p",14),i(19,"Total Entreprises"),t(),e(20,"p",15),i(21),t()()()(),e(22,"div",8)(23,"div",9)(24,"div",16),m(),e(25,"svg",17),d(26,"path",18),t()(),c(),e(27,"div",13)(28,"p",14),i(29,"Actives"),t(),e(30,"p",15),i(31),t()()()(),e(32,"div",8)(33,"div",9)(34,"div",19),m(),e(35,"svg",20),d(36,"path",21),t()(),c(),e(37,"div",13)(38,"p",14),i(39,"Offres Totales"),t(),e(40,"p",15),i(41),t()()()()(),e(42,"div",22)(43,"div",23)(44,"h2",24),i(45,"Liste des Entreprises"),t()(),h(46,A,6,0,"div",25)(47,D,7,0,"div",25)(48,H,3,1,"div",26)(49,G,9,5,"div",27),t()()),a&2&&(r(8),s("disabled",l.loading),r(),s("ngIf",l.loading),r(),s("ngIf",!l.loading),r(11),p(l.totalElements),r(10),p(l.activeCompaniesCount),r(10),p(l.totalOffersCount),r(5),s("ngIf",l.loading),r(),s("ngIf",!l.loading&&l.companies.length===0),r(),s("ngIf",!l.loading&&l.companies.length>0),r(),s("ngIf",!l.loading&&l.companies.length>0&&l.totalPages>1))},dependencies:[T,I,P,M],encapsulation:2})}}return o})();export{K as FacultyCompaniesComponent};

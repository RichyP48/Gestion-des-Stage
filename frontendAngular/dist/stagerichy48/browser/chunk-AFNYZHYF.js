import{a as U,b as c,c as V,d as Y,g as P,i as z,j as G,k as B,l as $,m as H,o as J,p as K,q as Q}from"./chunk-OYOJ2XX2.js";import{a as Z}from"./chunk-NHNZC5T7.js";import{e as j,f as O}from"./chunk-KFQQY7Q4.js";import{a as X}from"./chunk-GDEHS6TE.js";import"./chunk-SX46PIGY.js";import{a as W}from"./chunk-SNFTPR3R.js";import"./chunk-ZS4G4JJV.js";import"./chunk-4QFA7BNO.js";import{$a as x,Aa as h,Oa as y,P as C,Pb as M,Qa as m,Qb as q,Rb as A,Ta as S,U as F,Ua as i,Va as e,Wa as p,Wb as D,Za as R,_ as N,_a as v,a as _,eb as a,fb as E,gb as T,ha as w,ia as I,ja as k,nb as L,ob as g,za as s}from"./chunk-CZ4BJCOO.js";var ee=(()=>{class n{constructor(t){this.apiService=t}getAllSchools(){return this.apiService.get("/schools")}getFacultiesBySchool(t){return this.apiService.get(`/schools/${t}/faculties`)}static{this.\u0275fac=function(o){return new(o||n)(F(W))}}static{this.\u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var f=n=>({"border-red-500":n});function ie(n,b){if(n&1&&(i(0,"option",32),a(1),e()),n&2){let t=b.$implicit;m("value",t.id),s(),E(t.name)}}function oe(n,b){if(n&1&&(i(0,"option",32),a(1),e()),n&2){let t=b.$implicit;m("value",t.id),s(),E(t.name)}}function ne(n,b){if(n&1){let t=R();i(0,"div")(1,"div",23)(2,"div")(3,"label",5),a(4,"Pr\xE9nom"),e(),p(5,"input",24),e(),i(6,"div")(7,"label",5),a(8,"Nom"),e(),p(9,"input",25),e()(),i(10,"div")(11,"label",5),a(12,"Email"),e(),p(13,"input",26),e(),i(14,"div")(15,"label",5),a(16,"T\xE9l\xE9phone"),e(),p(17,"input",27),e(),i(18,"div")(19,"label",5),a(20,"\xC9cole"),e(),i(21,"select",28),v("change",function(r){w(t);let l=x();return I(l.onSchoolChange(r))}),i(22,"option",29),a(23,"S\xE9lectionnez une \xE9cole"),e(),y(24,ie,2,2,"option",30),e()(),i(25,"div")(26,"label",5),a(27,"Facult\xE9"),e(),i(28,"select",31)(29,"option",29),a(30,"S\xE9lectionnez une facult\xE9"),e(),y(31,oe,2,2,"option",30),e()()()}if(n&2){let t,o,r,l,u,d=x();s(5),m("ngClass",g(8,f,((t=d.registerForm.get("firstName"))==null?null:t.invalid)&&((t=d.registerForm.get("firstName"))==null?null:t.touched))),s(4),m("ngClass",g(10,f,((o=d.registerForm.get("lastName"))==null?null:o.invalid)&&((o=d.registerForm.get("lastName"))==null?null:o.touched))),s(4),m("ngClass",g(12,f,((r=d.registerForm.get("email"))==null?null:r.invalid)&&((r=d.registerForm.get("email"))==null?null:r.touched))),s(8),m("ngClass",g(14,f,((l=d.registerForm.get("schoolId"))==null?null:l.invalid)&&((l=d.registerForm.get("schoolId"))==null?null:l.touched))),s(3),m("ngForOf",d.schools),s(4),m("ngClass",g(16,f,((u=d.registerForm.get("facultyId"))==null?null:u.invalid)&&((u=d.registerForm.get("facultyId"))==null?null:u.touched)))("disabled",!d.selectedSchoolId),s(3),m("ngForOf",d.faculties)}}function le(n,b){if(n&1&&(i(0,"div")(1,"div",23)(2,"div")(3,"label",5),a(4,"Pr\xE9nom contact"),e(),p(5,"input",33),e(),i(6,"div")(7,"label",5),a(8,"Nom contact"),e(),p(9,"input",34),e()(),i(10,"div")(11,"label",5),a(12,"Email"),e(),p(13,"input",35),e(),i(14,"div")(15,"label",5),a(16,"Nom de l'\xE9tablissement"),e(),p(17,"input",36),e(),i(18,"div")(19,"label",5),a(20,"Description"),e(),p(21,"textarea",37),e(),i(22,"div")(23,"label",5),a(24,"Facult\xE9s (s\xE9par\xE9es par des virgules)"),e(),p(25,"textarea",38),i(26,"p",39),a(27,"Entrez les noms des facult\xE9s s\xE9par\xE9s par des virgules"),e()()()),n&2){let t,o,r,l,u,d=x();s(5),m("ngClass",g(5,f,((t=d.registerForm.get("contactFirstName"))==null?null:t.invalid)&&((t=d.registerForm.get("contactFirstName"))==null?null:t.touched))),s(4),m("ngClass",g(7,f,((o=d.registerForm.get("contactLastName"))==null?null:o.invalid)&&((o=d.registerForm.get("contactLastName"))==null?null:o.touched))),s(4),m("ngClass",g(9,f,((r=d.registerForm.get("contactEmail"))==null?null:r.invalid)&&((r=d.registerForm.get("contactEmail"))==null?null:r.touched))),s(4),m("ngClass",g(11,f,((l=d.registerForm.get("schoolName"))==null?null:l.invalid)&&((l=d.registerForm.get("schoolName"))==null?null:l.touched))),s(8),m("ngClass",g(13,f,((u=d.registerForm.get("facultyNames"))==null?null:u.invalid)&&((u=d.registerForm.get("facultyNames"))==null?null:u.touched)))}}function ae(n,b){if(n&1&&(i(0,"div")(1,"div",23)(2,"div")(3,"label",5),a(4,"Pr\xE9nom contact"),e(),p(5,"input",33),e(),i(6,"div")(7,"label",5),a(8,"Nom contact"),e(),p(9,"input",34),e()(),i(10,"div")(11,"label",5),a(12,"Email"),e(),p(13,"input",35),e(),i(14,"div")(15,"label",5),a(16,"Nom de l'entreprise"),e(),p(17,"input",40),e(),i(18,"div")(19,"label",5),a(20,"Secteur d'activit\xE9"),e(),p(21,"input",41),e()()),n&2){let t,o,r,l,u=x();s(5),m("ngClass",g(4,f,((t=u.registerForm.get("contactFirstName"))==null?null:t.invalid)&&((t=u.registerForm.get("contactFirstName"))==null?null:t.touched))),s(4),m("ngClass",g(6,f,((o=u.registerForm.get("contactLastName"))==null?null:o.invalid)&&((o=u.registerForm.get("contactLastName"))==null?null:o.touched))),s(4),m("ngClass",g(8,f,((r=u.registerForm.get("contactEmail"))==null?null:r.invalid)&&((r=u.registerForm.get("contactEmail"))==null?null:r.touched))),s(4),m("ngClass",g(10,f,((l=u.registerForm.get("companyName"))==null?null:l.invalid)&&((l=u.registerForm.get("companyName"))==null?null:l.touched)))}}function se(n,b){if(n&1&&(i(0,"div",42),a(1),e()),n&2){let t=x();s(),T(" ",t.errorMessage," ")}}function me(n,b){n&1&&(i(0,"span"),a(1,"S'inscrire"),e())}function de(n,b){n&1&&(i(0,"span",43),k(),i(1,"svg",44),p(2,"circle",45)(3,"path",46),e(),a(4," Inscription... "),e())}var xe=(()=>{class n{constructor(t,o,r,l,u){this.fb=t,this.schoolService=o,this.authService=r,this.notificationService=l,this.router=u,this.selectedRole="STUDENT",this.isLoading=!1,this.errorMessage="",this.schools=[],this.faculties=[],this.selectedSchoolId=null,this.registerForm=this.createForm()}ngOnInit(){this.loadSchools()}selectRole(t){this.selectedRole=t,this.registerForm=this.createForm()}createForm(){return this.selectedRole==="STUDENT"?this.fb.group({firstName:["",[c.required]],lastName:["",[c.required]],email:["",[c.required,c.email]],phoneNumber:[""],schoolId:["",[c.required]],facultyId:["",[c.required]],password:["",[c.required,c.minLength(6)]]}):this.selectedRole==="FACULTY"?this.fb.group({contactFirstName:["",[c.required]],contactLastName:["",[c.required]],contactEmail:["",[c.required,c.email]],schoolName:["",[c.required]],schoolDescription:[""],facultyNames:["",[c.required]],password:["",[c.required,c.minLength(6)]]}):this.fb.group({contactFirstName:["",[c.required]],contactLastName:["",[c.required]],contactEmail:["",[c.required,c.email]],companyName:["",[c.required]],companyIndustrySector:[""],password:["",[c.required,c.minLength(6)]]})}loadSchools(){console.log("Loading schools..."),this.schoolService.getAllSchools().subscribe({next:t=>{console.log("Schools loaded:",t),this.schools=t},error:t=>{console.error("Error loading schools:",t)}})}onSchoolChange(t){let o=parseInt(t.target.value);console.log("School changed to:",o),this.selectedSchoolId=o,this.faculties=[],this.registerForm.get("facultyId")?.setValue(""),o&&(console.log("Loading faculties for school:",o),this.schoolService.getFacultiesBySchool(o).subscribe({next:r=>{console.log("Faculties loaded:",r),this.faculties=r},error:r=>{console.error("Error loading faculties:",r)}}))}onSubmit(){if(this.registerForm.valid){this.isLoading=!0,this.errorMessage="";let t=_({},this.registerForm.value);if(this.selectedRole==="FACULTY"){let r=t.facultyNames||"";t.facultyNames=r.split(",").map(l=>l.trim()).filter(l=>l!==""),console.log("Faculty names being sent:",t.facultyNames)}let o;switch(this.selectedRole){case"STUDENT":o=this.authService.registerStudent(t);break;case"COMPANY":o=this.authService.registerCompany(t);break;case"FACULTY":o=this.authService.registerSchool(t);break;default:this.isLoading=!1;return}o.subscribe({next:r=>{this.isLoading=!1,this.notificationService.showSuccess("Inscription r\xE9ussie ! Vous \xEAtes maintenant connect\xE9."),this.router.navigate(["/dashboard"])},error:r=>{this.isLoading=!1;let l=r.error||"Erreur lors de l'inscription";this.errorMessage=l,this.notificationService.showError(l)}})}}static{this.\u0275fac=function(o){return new(o||n)(h(J),h(ee),h(X),h(Z),h(j))}}static{this.\u0275cmp=N({type:n,selectors:[["app-register"]],standalone:!0,features:[L],decls:38,vars:17,consts:[[1,"flex"],[1,"h-screen","flex","flex-col","items-center","justify-center","bg-gradient-to-r","from-[#2dd4bf]","to-[#1f2937]","w-full","overflow-y-auto"],[1,"w-full","max-w-md","p-8","space-y-6","bg-transparent","rounded-lg","shadow-md","my-8",2,"backdrop-filter","blur(8px)","-webkit-backdrop-filter","blur(8px)","background-color","rgba(255, 255, 255, 0.1)"],[1,"text-2xl","font-bold","text-center","text-gray-900"],[1,"space-y-2"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"grid","grid-cols-3","gap-2"],["type","button",1,"px-3","py-2","border","border-primary-600","rounded-md","text-sm","font-medium","hover:bg-primary-50",3,"click"],[1,"space-y-4",3,"ngSubmit","formGroup"],[4,"ngIf"],["formControlName","password","type","password",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["class","p-3 text-sm text-red-700 bg-red-100 border border-red-400 rounded-md",4,"ngIf"],["type","submit",1,"flex","justify-center","w-full","px-4","py-2","text-sm","font-medium","text-white","bg-primary-600","border","border-transparent","rounded-md","shadow-sm","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","flex items-center",4,"ngIf"],[1,"mt-4","text-sm","text-center","text-gray-600"],["routerLink","/auth/login",1,"font-medium","text-primary-600","hover:text-primary-500"],[1,"w-full"],[1,"w-full","h-screen","relative","bg-amber-200","inset-0","bg-cover","bg-center",2,"background-image","url('/slider.jpg')"],[1,"absolute","inset-0","overflow-hidden","bg-gradient-to-r","from-[#2dd4bf]","to-[#1f2937]","opacity-50"],[1,"absolute","inset-0","overflow-hidden","bg-gradient-to-r","from-primary-800","via-primary-700","to-primary-900","opacity-90"],[1,"absolute","bottom-0","right-0","w-96","h-96","bg-gradient-to-r","bg-[#2dd4bf]","to-[#1f2937]","rounded-full","blur-3xl","animate-pulse"],[1,"absolute","bottom-0","right-0","w-64","h-64","bg-orange-400","rounded-full","blur-3xl","animate-pulse"],[1,"absolute","top-1/2","left-1/3","w-48","h-48","bg-primary-400","rounded-full","blur-3xl","animate-pulse"],[1,"grid","grid-cols-2","gap-4"],["formControlName","firstName","type","text",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","lastName","type","text",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","email","type","email",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","phoneNumber","type","tel",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm"],["formControlName","schoolId",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"change","ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","facultyId",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass","disabled"],[3,"value"],["formControlName","contactFirstName","type","text",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","contactLastName","type","text",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","contactEmail","type","email",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","schoolName","type","text",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","schoolDescription","rows","2",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm"],["formControlName","facultyNames","rows","3","placeholder","Informatique, Math\xE9matiques, Physique, Chimie...",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],[1,"mt-1","text-sm","text-gray-500"],["formControlName","companyName","type","text",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngClass"],["formControlName","companyIndustrySector","type","text",1,"block","w-full","px-3","py-2","mt-1","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm"],[1,"p-3","text-sm","text-red-700","bg-red-100","border","border-red-400","rounded-md"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"w-5","h-5","mr-3","-ml-1","text-white","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(o,r){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),a(4," Inscription "),e(),i(5,"div",4)(6,"label",5),a(7,"Type de compte"),e(),i(8,"div",6)(9,"button",7),v("click",function(){return r.selectRole("STUDENT")}),a(10," \xC9tudiant "),e(),i(11,"button",7),v("click",function(){return r.selectRole("COMPANY")}),a(12," Entreprise "),e(),i(13,"button",7),v("click",function(){return r.selectRole("FACULTY")}),a(14," \xC9tablissement "),e()()(),i(15,"form",8),v("ngSubmit",function(){return r.onSubmit()}),y(16,ne,32,18,"div",9)(17,le,28,15,"div",9)(18,ae,22,12,"div",9),i(19,"div")(20,"label",5),a(21,"Mot de passe"),e(),p(22,"input",10),e(),y(23,se,2,1,"div",11),i(24,"button",12),y(25,me,2,0,"span",9)(26,de,5,0,"span",13),e()(),i(27,"p",14),a(28," D\xE9j\xE0 un compte ? "),i(29,"a",15),a(30," Se connecter ici "),e()()()(),i(31,"div",16)(32,"div",17),p(33,"div",18),i(34,"div",19),p(35,"div",20)(36,"div",21)(37,"div",22),e()()()()),o&2){let l;s(9),S(r.selectedRole==="STUDENT"?"bg-primary-600 text-white":"bg-white text-primary-600"),s(2),S(r.selectedRole==="COMPANY"?"bg-primary-600 text-white":"bg-white text-primary-600"),s(2),S(r.selectedRole==="FACULTY"?"bg-primary-600 text-white":"bg-white text-primary-600"),s(2),m("formGroup",r.registerForm),s(),m("ngIf",r.selectedRole==="STUDENT"),s(),m("ngIf",r.selectedRole==="FACULTY"),s(),m("ngIf",r.selectedRole==="COMPANY"),s(4),m("ngClass",g(15,f,((l=r.registerForm.get("password"))==null?null:l.invalid)&&((l=r.registerForm.get("password"))==null?null:l.touched))),s(),m("ngIf",r.errorMessage),s(),m("disabled",r.registerForm.invalid||r.isLoading),s(),m("ngIf",!r.isLoading),s(),m("ngIf",r.isLoading)}},dependencies:[D,M,q,A,O,Q,P,$,H,U,B,V,Y,z,G,K]})}}return n})();export{xe as RegisterComponent};

import{a as L,c as q,d as A,e as j,f as N,g as P,h as B,n as H,p as z}from"./chunk-OYOJ2XX2.js";import{a as G}from"./chunk-NHNZC5T7.js";import{e as F}from"./chunk-KFQQY7Q4.js";import{a as R}from"./chunk-RX5L7MNL.js";import"./chunk-SNFTPR3R.js";import"./chunk-ZS4G4JJV.js";import"./chunk-4QFA7BNO.js";import{$a as s,Aa as C,Oa as h,Pb as I,Qa as x,Qb as T,Rb as W,Ua as i,Va as n,Wa as v,Wb as D,Za as S,_ as E,_a as _,db as M,eb as a,fb as O,gb as y,ha as m,ia as f,ja as b,jb as c,ka as w,kb as p,lb as u,nb as k,qb as V,za as l}from"./chunk-CZ4BJCOO.js";var X=(d,g,e)=>({"bg-green-100 text-green-800":d,"bg-red-100 text-red-800":g,"bg-yellow-100 text-yellow-800":e});function J(d,g){if(d&1&&(i(0,"span",38),a(1),n()),d&2){let e=g.$implicit;l(),y(" ",e," ")}}function K(d,g){if(d&1&&(i(0,"div",34)(1,"p",35),a(2,"Comp\xE9tences requises:"),n(),i(3,"div",36),h(4,J,2,1,"span",37),n()()),d&2){let e=s().$implicit,r=s();l(4),x("ngForOf",r.getSkillsArray(e.requiredSkills))}}function Q(d,g){if(d&1){let e=S();i(0,"div",12)(1,"div",13)(2,"div",14)(3,"h3",15),a(4),n(),i(5,"span",16),a(6),n()()(),i(7,"div",17)(8,"div",18)(9,"div",19),b(),i(10,"svg",20),v(11,"path",21)(12,"path",22),n(),a(13),n(),w(),i(14,"div",19),b(),i(15,"svg",20),v(16,"path",23),n(),a(17),n(),w(),i(18,"div",24),b(),i(19,"svg",20),v(20,"path",25),n(),a(21),n()(),w(),i(22,"p",26),a(23),n(),h(24,K,5,1,"div",27),n(),i(25,"div",28)(26,"div",29)(27,"span",30),a(28),n(),i(29,"div",31)(30,"button",32),_("click",function(){let t=m(e).$implicit,o=s();return f(o.viewApplications(t))}),a(31," Candidatures "),n(),i(32,"button",33),_("click",function(){let t=m(e).$implicit,o=s();return f(o.deleteOffer(t))}),a(33," Supprimer "),n()()()()()}if(d&2){let e=g.$implicit,r=s();l(4),O(e.title),l(),x("ngClass",V(9,X,e.status==="ACTIVE",e.status==="INACTIVE",e.status==="EXPIRED")),l(),y(" ",r.getStatusLabel(e.status)," "),l(7),y(" ",e.location," "),l(4),y(" ",e.duration," mois "),l(4),y(" ",e.domain," "),l(2),O(e.description),l(),x("ngIf",e.requiredSkills),l(4),y(" Cr\xE9\xE9e: ",r.formatDate(e.createdAt)," ")}}function U(d,g){if(d&1){let e=S();i(0,"div",39)(1,"div",40)(2,"h3",41),a(3,"Cr\xE9er une nouvelle offre"),n(),i(4,"form",42,0),_("ngSubmit",function(){m(e);let t=s();return f(t.saveOffer())}),i(6,"div",43)(7,"div",44)(8,"label",45),a(9,"Titre"),n(),i(10,"input",46),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.title,t)||(o.currentOffer.title=t),f(t)}),n()(),i(11,"div",44)(12,"label",45),a(13,"Domaine"),n(),i(14,"input",46),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.domain,t)||(o.currentOffer.domain=t),f(t)}),n()(),i(15,"div",44)(16,"label",45),a(17,"Description"),n(),i(18,"textarea",47),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.description,t)||(o.currentOffer.description=t),f(t)}),n()(),i(19,"div")(20,"label",45),a(21,"Lieu"),n(),i(22,"input",48),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.location,t)||(o.currentOffer.location=t),f(t)}),n()(),i(23,"div")(24,"label",45),a(25,"Dur\xE9e (mois)"),n(),i(26,"input",49),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.duration,t)||(o.currentOffer.duration=t),f(t)}),n()(),i(27,"div")(28,"label",45),a(29,"Date de d\xE9but"),n(),i(30,"input",50),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.startDate,t)||(o.currentOffer.startDate=t),f(t)}),n()(),i(31,"div")(32,"label",45),a(33,"Salaire (\u20AC/mois)"),n(),i(34,"input",51),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.salaire,t)||(o.currentOffer.salaire=t),f(t)}),n()(),i(35,"div",44)(36,"label",45),a(37,"Comp\xE9tences requises"),n(),i(38,"input",52),u("ngModelChange",function(t){m(e);let o=s();return p(o.currentOffer.requiredSkills,t)||(o.currentOffer.requiredSkills=t),f(t)}),n()()(),i(39,"div",53)(40,"button",54),_("click",function(){m(e);let t=s();return f(t.closeModal())}),a(41," Annuler "),n(),i(42,"button",55),a(43," Cr\xE9er l'offre "),n()()()()()}if(d&2){let e=M(5),r=s();l(10),c("ngModel",r.currentOffer.title),l(4),c("ngModel",r.currentOffer.domain),l(4),c("ngModel",r.currentOffer.description),l(4),c("ngModel",r.currentOffer.location),l(4),c("ngModel",r.currentOffer.duration),l(4),c("ngModel",r.currentOffer.startDate),l(4),c("ngModel",r.currentOffer.salaire),l(4),c("ngModel",r.currentOffer.requiredSkills),l(4),x("disabled",!e.form.valid)}}var oe=(()=>{class d{constructor(e,r,t){this.offerService=e,this.notificationService=r,this.router=t,this.offers=[],this.showModal=!1,this.currentOffer=this.getEmptyOffer()}getSkillsArray(e){return e?e.split(",").map(r=>r.trim()).filter(r=>r.length>0):[]}formatDate(e){let r=new Date(e);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}).format(r)}ngOnInit(){this.loadOffers()}loadOffers(){this.offerService.getCompanyOffers().subscribe({next:e=>{console.log("Company offers response:",e),this.offers=e.content||e||[],console.log("Loaded offers:",this.offers)},error:e=>{console.error("Erreur lors du chargement des offres:",e),this.notificationService.showError("Erreur lors du chargement des offres")}})}openAddOfferModal(){this.currentOffer=this.getEmptyOffer(),this.showModal=!0}saveOffer(){this.offerService.createOffer(this.currentOffer).subscribe({next:()=>{this.loadOffers(),this.closeModal(),this.notificationService.showSuccess("Offre cr\xE9\xE9e avec succ\xE8s")},error:e=>{console.error("Erreur lors de la cr\xE9ation:",e),this.notificationService.showError("Erreur lors de la cr\xE9ation de l'offre")}})}closeModal(){this.showModal=!1,this.currentOffer=this.getEmptyOffer()}getStatusLabel(e){return{ACTIVE:"Actif",INACTIVE:"Inactif",EXPIRED:"Expir\xE9"}[e]||e}viewApplications(e){this.router.navigate(["/company/applications"],{queryParams:{offerId:e.id}})}deleteOffer(e){confirm(`\xCAtes-vous s\xFBr de vouloir supprimer l'offre "${e.title}" ?`)&&this.offerService.deleteOffer(e.id).subscribe({next:()=>{this.offers=this.offers.filter(r=>r.id!==e.id),this.notificationService.showSuccess("Offre supprim\xE9e avec succ\xE8s")},error:r=>{console.error("Erreur lors de la suppression:",r),this.notificationService.showError("Erreur lors de la suppression de l'offre")}})}getEmptyOffer(){return{title:"",description:"",requiredSkills:"",duration:"",startDate:new Date,dateFin:new Date,salaire:0,location:"",domain:"",companyId:0,statut:"ACTIVE"}}static{this.\u0275fac=function(r){return new(r||d)(C(R),C(G),C(F))}}static{this.\u0275cmp=E({type:d,selectors:[["app-company-offers"]],standalone:!0,features:[k],decls:15,vars:2,consts:[["offerForm","ngForm"],[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","p-6"],[1,"text-2xl","font-bold","text-primary-900"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-semibold","text-primary-900"],[1,"bg-primary-600","text-white","px-4","py-2","rounded-lg","hover:bg-primary-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-md overflow-hidden flex flex-col",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","flex","flex-col"],[1,"p-4","border-b"],[1,"flex","justify-between","items-start"],[1,"text-lg","font-semibold","text-gray-900","truncate"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"p-4","flex-grow"],[1,"grid","grid-cols-2","gap-2","text-sm","text-gray-500","mb-4"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"flex","items-center","col-span-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"],[1,"text-sm","text-gray-600","mb-4","line-clamp-3"],["class","mb-4",4,"ngIf"],[1,"p-4","border-t","bg-gray-50"],[1,"flex","justify-between","items-center"],[1,"text-xs","text-gray-500"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","px-3","py-1.5","border","border-transparent","text-xs","font-medium","rounded-md","text-white","bg-primary-600","hover:bg-primary-700",3,"click"],[1,"inline-flex","items-center","px-3","py-1.5","border","border-transparent","text-xs","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700",3,"click"],[1,"mb-4"],[1,"text-xs","text-gray-500","mb-1"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium","bg-gray-100","text-gray-800"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded-lg","p-6","w-full","max-w-2xl","max-h-screen","overflow-y-auto"],[1,"text-lg","font-semibold","mb-4"],[3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-gray-700"],["name","titre","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","px-3","py-2",3,"ngModelChange","ngModel"],["name","description","required","","rows","3",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","px-3","py-2",3,"ngModelChange","ngModel"],["name","lieu","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","px-3","py-2",3,"ngModelChange","ngModel"],["name","duree","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","px-3","py-2",3,"ngModelChange","ngModel"],["name","dateDebut","type","date","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","px-3","py-2",3,"ngModelChange","ngModel"],["name","salaire","type","number",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","px-3","py-2",3,"ngModelChange","ngModel"],["name","competencesRequises","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","px-3","py-2",3,"ngModelChange","ngModel"],[1,"flex","justify-end","space-x-2","mt-6"],["type","button",1,"px-4","py-2","text-gray-600","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],["type","submit",1,"px-4","py-2","bg-primary-600","text-white","rounded-md","hover:bg-primary-700","disabled:opacity-50",3,"disabled"]],template:function(r,t){r&1&&(i(0,"div",1)(1,"div",2)(2,"h1",3),a(3,"Mes offres de stage"),n()(),i(4,"div",2)(5,"div",4)(6,"h2",5),a(7,"Liste des offres"),n(),i(8,"button",6),_("click",function(){return t.openAddOfferModal()}),b(),i(9,"svg",7),v(10,"path",8),n(),a(11," Cr\xE9er une offre "),n()(),w(),i(12,"div",9),h(13,Q,34,13,"div",10),n()()(),h(14,U,44,9,"div",11)),r&2&&(l(13),x("ngForOf",t.offers),l(),x("ngIf",t.showModal))},dependencies:[D,I,T,W,z,P,L,B,q,A,H,N,j],styles:[".line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}"]})}}return d})();export{oe as CompanyOffersComponent};
